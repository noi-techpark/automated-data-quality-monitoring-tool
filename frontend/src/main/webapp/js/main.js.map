{"mappings":"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","sources":["src/main/typescript/main.ts","src/main/typescript/MainComponent.ts","src/main/typescript/MenuComponent.ts","src/main/typescript/Loader.ts","src/main/typescript/api/api3.ts","src/main/typescript/quality.ts","src/main/typescript/StandardDashboardsComponent.ts","src/main/typescript/DatasetCardComponent.ts","src/main/typescript/LabelAndData.ts","src/main/typescript/DatasetIssuesDetail.ts","src/main/typescript/OpenCloseSection.ts","src/main/typescript/SectionRow.ts","src/main/typescript/DatasetIssueCategoryComponent.ts","src/main/typescript/DatasetIssuesByCategories.ts","src/main/typescript/AuthComponent.ts","node_modules/keycloak-js/lib/keycloak.js","node_modules/jwt-decode/build/esm/index.js"],"sourcesContent":["// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nimport {MainComponent} from './MainComponent.js'\n\nconst mainComponent = new MainComponent();\n// mainComponent.refresh();\ndocument.body.appendChild(mainComponent)\n","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nimport {MenuComponent} from './MenuComponent.js'\nimport {StandardDashboardsComponent} from './StandardDashboardsComponent.js'\n\n\nimport {DatasetIssuesDetail} from './DatasetIssuesDetail.js'\nimport { cs_cast, cs_notnull } from './quality.js';\nimport { DatasetIssuesByCategories } from './DatasetIssuesByCategories.js';\n\nimport { AuthComponent } from './AuthComponent.js'\n\nexport class MainComponent extends HTMLElement\n{\n\tsroot\n\t\n\tdashboards: StandardDashboardsComponent|null = null;\n\t\n\tchangingSection\n\t\n\tlogo\n\n\tconstructor()\n\t{\n\t\tsuper()\n\t\tthis.sroot = this.attachShadow({ mode: 'open' })\n\t\tthis.sroot.innerHTML = `\n\t\t\t<link rel=\"stylesheet\" href=\"index.css\">\n\t\t\t<style>\n\t\t\t\tcs-menu-element {\n\t\t\t\t\twidth: 12rem;\n\t\t\t\t}\n\t\t\t\t.header {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tgap: 1rem;\n\t\t\t\t}\n\t\t\t\t.header-center {\n\t\t\t\t\tflex-grow: 1;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\t\t\t</style>\n\t\t\t<div class=\"MainComponent\">\n\t\t\t\t<div class=\"header\">\n\t\t\t\t\t<img class=\"logo\" src=\"NOI_OPENDATAHUB_NEW_BK_nospace-01.svg\">\n\t\t\t\t\t<div class=\"header-center\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"body\">\n\t\t\t\t\t<div class=\"projects\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`\n\t\tthis.changingSection = this.sroot.querySelector('.projects')!\n\t\t\n\t\tthis.logo = cs_cast(HTMLImageElement, this.sroot.querySelector('.logo'))\n\t\tthis.logo.onclick = () => {\n\t\t\tlocation.hash = ''\n\t\t}\n\t\t\n\t\t// Sposta AuthComponent a destra della header\n\t\tthis.sroot.querySelector('.header')!.appendChild(new AuthComponent())\n\t\t\n\t\tconst menu: MenuComponent = new MenuComponent();\n\t\tmenu.refresh()\n\t\tthis.changingSection.parentElement!.prepend(menu);\n\t\t\n\t\t// this.projectsComponent = new ProjectsElement();\n\t\t// projects.appendChild(this.projectsComponent.element);\n\t\t\n\t\tconst onhashchange = () => {\n\t\t\t\n\t\t\tconsole.log('hash')\n\t\t\tconsole.log(location.hash)\n\t\t\t\n\t\t\tthis.changingSection.textContent = ''\n\t\t\t\n\t\t\tlet cleanedhash = location.hash\n\t\t\tif (cleanedhash.startsWith('#state='))\n\t\t\t\tcleanedhash = ''\n\t\t\t\n\t\t\tif (cleanedhash == '')\n\t\t\t{\n\t\t\t\tif (this.dashboards == null)\n\t\t\t\t{\n\t\t\t\t\tthis.dashboards = new StandardDashboardsComponent();\n\t\t\t\t\tthis.dashboards.refresh();\n\t\t\t\t}\n\t\t\t\tthis.changingSection.appendChild(this.dashboards)\n\t\t\t\tmenu.selectItem('')\n\t\t\t}\n\n\t\t\tif (cleanedhash.indexOf('#page=dataset-categories&') == 0)\n\t\t\t{\n\t\t\t\tthis.changingSection.textContent = ''\n\t\t\t\tconst detail = new DatasetIssuesByCategories();\n\t\t\t\tthis.changingSection.appendChild(detail)\n\t\t\t\tconst params = new URLSearchParams(cleanedhash.substring(1));\n\t\t\t\tconst session_start_ts = cs_notnull(params.get('session_start_ts'))\n\t\t\t\tconst dataset_name = cs_notnull(params.get('dataset_name'))\n\t\t\t\tconst failed_records = parseInt(cs_notnull(params.get('failed_records')))\n\t\t\t\tconst tested_records = parseInt(cs_notnull(params.get('tested_records')))\n\t\t\t\tdetail.refresh(session_start_ts, dataset_name, failed_records, tested_records);\n\t\t\t\tmenu.selectItem(dataset_name)\n\t\t\t}\n\t\t\t\n\t\t\tif (cleanedhash.startsWith('#page=summary&'))\n\t\t\t{\n\t\t\t\tthis.changingSection.textContent = ''\n\t\t\t\tconst detail = new DatasetIssuesDetail();\n\t\t\t\tthis.changingSection.appendChild(detail)\n\t\t\t\tconst params = new URLSearchParams(cleanedhash.substring(1));\n\t\t\t\tconst session_start_ts = cs_notnull(params.get('session_start_ts'))\n\t\t\t\tconst dataset_name = cs_notnull(params.get('dataset_name'))\n\t\t\t\tconst category_name = cs_notnull(params.get('category_name'))\n\t\t\t\tconst failed_records = parseInt(cs_notnull(params.get('failed_records')))\n\t\t\t\tconst tot_records = parseInt(cs_notnull(params.get('tot_records')))\n\t\t\t\tdetail.refresh(session_start_ts, dataset_name, category_name, failed_records, tot_records);\n\t\t\t\tmenu.selectItem(dataset_name)\n\t\t\t}\n\t\t}\n\t\t\n\t\twindow.onpopstate = (e) => {\n\t\t\tonhashchange()\n\t\t}\n\n\t\tonhashchange()\n\n\t\t\n\t}\n\t\n}\n\ncustomElements.define('cs-main-component', MainComponent)\n","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nimport { Loader } from './Loader.js';\nimport {API3} from './api/api3.js';\nimport { cs_cast } from './quality.js';\n\n/*\n\n// in the custom element class:\nthis.shadowRoot.adoptedStyleSheets = [...document.adoptedStyleSheets, myCustomSheet];\n\nhttps://stackoverflow.com/questions/28664207/importing-styles-into-a-web-component\n\n */\n\nexport class MenuComponent extends HTMLElement\n{\n\tsroot\n\tsubmenus\n\t\n\tmenuitemByName: {[k:string]: HTMLElement} = {}\n\t\n\tmenuready_promise\n\t\n\tconstructor()\n\t{\n\t\tsuper()\n\t\tthis.sroot = this.attachShadow({ mode: 'open' })\n\t\tthis.sroot.innerHTML = `\n\t\t\t<style>\n\n\t\t\t\t.title {\n\t\t\t\t\tpadding: 0.4rem;\n\t\t\t\t}\n\n\t\t\t\tdiv.submenus {\n\t\t\t\t\tpadding-left: 1rem;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t}\n\t\t\t\tdiv.submenus > * {\n\t\t\t\t\tmargin:  0.4rem;\n\t\t\t\t\tpadding: 0.2rem;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t\t.selected {\n\t\t\t\t\tbackground: #666;\n\t\t\t\t\tcolor: white;\n\t\t\t\t}\n\t\t\t\t.title.close ~ .submenus {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t\t.openclose {\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t\t.openclose:before {\n\t\t\t\t\tcontent: \"\"\n\t\t\t\t}\n\t\t\t\t.title.close .openclose:before {\n\t\t\t\t\tcontent: \"\"\n\t\t\t\t}\n\t\t\t</style>\n\t\t\t<div class=\"title\"><span class=\"openclose\"></span> standard dashboards</div>\n\t\t\t<div class=\"submenus\"></div>\n\t\t`;\n\t\tthis.submenus = cs_cast(HTMLElement, this.sroot.querySelector('div.submenus'));\n\t\tconst title = cs_cast(HTMLElement, this.sroot.querySelector('div.title'))\n\t\tthis.menuitemByName[''] = title\n\t\t\n\t\ttitle.onclick = () => { location.hash = ''}\n\t\t\n\t\tconst openclose = cs_cast(HTMLElement, this.sroot.querySelector('span.openclose'));\n\t\topenclose.onclick = () => { title.classList.toggle('close') }\n\n\t\tlet menuready_fun: (x: null) => void\n\t\tthis.menuready_promise = new Promise(s => menuready_fun = s)\n\t\tconst json_promise = API3.list__catchsolve_noiodh__test_dataset_max_ts_vw({})\n\t\tconst loader = new Loader();\n\t\tthis.sroot.appendChild(loader)\n\t\tjson_promise.then(async (json) => {\n\t\t\tfor (let dataset of json)\n\t\t\t{\n\t\t\t\tconst menu1_submenu = document.createElement('div');\n\t\t\t\tmenu1_submenu.textContent = (dataset.dataset_name);\n\t\t\t\tthis.menuitemByName[dataset.dataset_name] = menu1_submenu\n\t\t\t\tthis.submenus.appendChild(menu1_submenu);\n\t\t\t\tmenu1_submenu.onclick = () => {\n\t\t\t\t\tlocation.hash = '#page=dataset-categories' +\n\t\t\t\t\t                '&dataset_name=' + dataset.dataset_name + \n\t\t\t\t\t\t\t\t\t'&session_start_ts=' + dataset.session_start_ts \n\t\t\t\t\t\t\t\t\t+ \"&failed_records=\" + dataset.failed_records\n\t\t\t\t\t\t\t\t\t+ \"&tested_records=\" + dataset.tested_records\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tloader.remove();\n\t\t\tmenuready_fun(null)\n\t\t})\n\n\t}\n\t\n\tasync refresh()\n\t{\n\t}\n\t\n\tasync selectItem(name: string)\n\t{\n\t\tawait this.menuready_promise\n\t\tfor (let k in this.menuitemByName)\n\t\t{\n\t\t\tconst item = this.menuitemByName[k]\n\t\t\tif (name == k)\n\t\t\t\titem.classList.add('selected')\n\t\t\telse\n\t\t\t\titem.classList.remove('selected')\n\t\t}\n\t}\n}\n\ncustomElements.define('cs-menu-element', MenuComponent)\n","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nexport class Loader extends HTMLElement\n{\n\tconstructor() {\n\t\tsuper()\n\t\tconst sroot = this.attachShadow({ mode: 'open' })\n\t\tsroot.innerHTML = `\n\t\t\t\t<link rel=\"stylesheet\" href=\"loader.css\">\n\t\t\t\t<style>\n\t\t\t\t\t:host {\n\t\t\t\t\t\twidth: 65px;\n\t\t\t\t\t\theight: 15px;\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tmargin: 2rem;\n\t\t\t\t\t}\n\t\t\t\t\tdiv.loader {\n\t\t\t\t\t\tcolor: #222;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t</style>\n\t\t\t\t<div class=\"loader\" style=\"margin-top: 0px; margin-left:20px\"></div>\n\t\t\t\t`\n\t\tcustomElements.upgrade(sroot)\n\t\t\n\t}\n\t\n}\n\ncustomElements.define('cs-loader', Loader)\n","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nexport class API3 {\n\n\tstatic async call(action: string, json: any)\n\t{\n\t\tconst params = new URLSearchParams();\n\t\tparams.append('action', action);\n\t\tparams.append('filter_byexample', JSON.stringify(json));\n\n\t\t// https://www.catch-solve.tech/noi-odh-testing-tool/api?\n\t\t// http://localhost:8080/api?\n\t\tconst resp = await fetch('api?' + params.toString());\n\t\tconst respjson = await resp.json();\n\t\t// wait for debug pourpose\n\t\t// await new Promise((s) =>  { setTimeout(s, 1000)})\n\t\treturn respjson;\n\t}\n\n\t// begin crudl methods\n\n\tstatic async list__catchsolve_noiodh__test_dataset_max_ts_vw\n\t(filter: catchsolve_noiodh__test_dataset_max_ts_vw__byexample):\n\t Promise<catchsolve_noiodh__test_dataset_max_ts_vw__row[]>\n\t{\n\t\tconst resp = await API3.call('catchsolve_noiodh.catchsolve_noiodh__test_dataset_max_ts_vw', filter)\n\t\treturn resp;\n\t}\n\t\n\tstatic async list__catchsolve_noiodh__test_dataset_check_category_failed_recors_vw\n\t(filter: catchsolve_noiodh__test_dataset_check_category_failed_recors_vw__byexample):\n\t Promise<catchsolve_noiodh__test_dataset_check_category_failed_recors_vw__row[]>\n\t{\n\t\tconst resp = await API3.call('catchsolve_noiodh.test_dataset_check_category_failed_recors_vw', filter)\n\t\treturn resp;\n\t}\n\t\n\tstatic async list__catchsolve_noiodh__test_dataset_check_category_check_name_failed_recors_vw\n\t(filter: catchsolve_noiodh__test_dataset_check_category_check_name_failed_recors_vw__byexample):\n\t Promise<catchsolve_noiodh__test_dataset_check_category_check_name_failed_recors_vw__row[]>\n\t{\n\t\tconst resp = await API3.call('catchsolve_noiodh.test_dataset_check_category_check_name_failed_recors_vw', filter)\n\t\treturn resp;\n\t}\n\t\n\tstatic async list__catchsolve_noiodh__test_dataset_check_category_check_name_record_record_failed_vw\n\t(filter: catchsolve_noiodh__test_dataset_check_category_check_name_record_record_failed_vw__byexample):\n\t Promise<catchsolve_noiodh__test_dataset_check_category_check_name_record_record_failed_vw__row[]>\n\t{\n\t\tconst resp = await API3.call('catchsolve_noiodh.test_dataset_check_category_check_name_record_record_failed_vw', filter)\n\t\treturn resp;\n\t}\n\t\n\tstatic async list__catchsolve_noiodh__test_dataset_record_check_failed\n\t(filter: catchsolve_noiodh__test_dataset_record_check_failed__byexample):\n\t Promise<catchsolve_noiodh__test_dataset_record_check_failed__row[]>\n\t{\n\t\tconst resp = await API3.call('catchsolve_noiodh.test_dataset_record_check_failed', filter)\n\t\treturn resp;\n\t}\n\n\tstatic async list__catchsolve_noiodh__test_dataset_check_category_record_jsonpath_failed_vw\n\t(filter: catchsolve_noiodh__test_dataset_check_category_record_jsonpath_failed_vw__byexample):\n\t Promise<catchsolve_noiodh__test_dataset_check_category_record_jsonpath_failed_vw__row[]>\n\t{\n\t\tconst resp = await API3.call('catchsolve_noiodh.test_dataset_check_category_record_jsonpath_failed_vw', filter)\n\t\treturn resp;\n\t}\n\n\tstatic async list__catchsolve_noiodh__test_dataset_history_vw\n\t(filter: catchsolve_noiodh__test_dataset_history_vw__byexample):\n\t Promise<catchsolve_noiodh__test_dataset_history_vw__row[]>\n\t{\n\t\tconst resp = await API3.call('catchsolve_noiodh.test_dataset_history_vw', filter)\n\t\treturn resp;\n\t}\n\t\n\t\n\n\t// end crudl methods\n}\n\n// begin interfaces\n\nexport interface catchsolve_noiodh__test_dataset__row {\n\tdataset_img_url: string\n\tdataset_name: string\n\tid: number\n\tsession_start_ts: string\n\ttested_records: number\n}\n\nexport interface catchsolve_noiodh__test_dataset_check__row {\n\tcheck_name: string\n\tdataset_name: string\n\tid: number\n\tsession_start_ts: string\n}\n\nexport interface catchsolve_noiodh__test_dataset_check_category_check_name_failed_recors_vw__row {\n\tcheck_category: string\n\tcheck_name: string\n\tdataset_name: string\n\tfailed_records: number\n\tsession_start_ts: string\n\ttot_records: number\n}\n\nexport interface catchsolve_noiodh__test_dataset_check_category_check_name_record_record_failed_vw__row {\n\tcheck_category: string\n\tcheck_name: string\n\tdataset_name: string\n\tnr_records: number\n\tsession_start_ts: string\n}\n\nexport interface catchsolve_noiodh__test_dataset_check_category_failed_recors_vw__row {\n\tcheck_category: string\n\tdataset_name: string\n\tfailed_records: number\n\tsession_start_ts: string\n\ttot_records: number\n}\n\nexport interface catchsolve_noiodh__test_dataset_check_category_record_jsonpath_failed_vw__row {\n\tcheck_category: string\n\tdataset_name: string\n\tnr_check_names: number\n\trecord_json: string\n\trecord_jsonpath: string\n\tsession_start_ts: string\n}\n\nexport interface catchsolve_noiodh__test_dataset_history_vw__row {\n\tcheck_category: string\n\tcheck_stats: string\n\tdataset_name: string\n\tsession_start_ts: string\n}\n\nexport interface catchsolve_noiodh__test_dataset_max_ts_vw__row {\n\tdataset_img_url: string\n\tdataset_name: string\n\tfailed_records: number\n\tsession_start_ts: string\n\ttested_records: number\n}\n\nexport interface catchsolve_noiodh__test_dataset_record_check_failed__row {\n\tcheck_category: string\n\tcheck_name: string\n\tdataset_name: string\n\tid: number\n\timpacted_attributes_csv: string\n\tproblem_hint: string\n\trecord_json: string\n\trecord_jsonpath: string\n\tsession_start_ts: string\n}\n\nexport interface catchsolve_noiodh__test_dataset__byexample {\n\tdataset_img_url?: string\n\tdataset_name?: string\n\tid?: number\n\tsession_start_ts?: string\n\ttested_records?: number\n}\n\nexport interface catchsolve_noiodh__test_dataset_check__byexample {\n\tcheck_name?: string\n\tdataset_name?: string\n\tid?: number\n\tsession_start_ts?: string\n}\n\nexport interface catchsolve_noiodh__test_dataset_check_category_check_name_failed_recors_vw__byexample {\n\tcheck_category?: string\n\tcheck_name?: string\n\tdataset_name?: string\n\tfailed_records?: number\n\tsession_start_ts?: string\n\ttot_records?: number\n}\n\nexport interface catchsolve_noiodh__test_dataset_check_category_check_name_record_record_failed_vw__byexample {\n\tcheck_category?: string\n\tcheck_name?: string\n\tdataset_name?: string\n\tnr_records?: number\n\tsession_start_ts?: string\n}\n\nexport interface catchsolve_noiodh__test_dataset_check_category_failed_recors_vw__byexample {\n\tcheck_category?: string\n\tdataset_name?: string\n\tfailed_records?: number\n\tsession_start_ts?: string\n\ttot_records?: number\n}\n\nexport interface catchsolve_noiodh__test_dataset_check_category_record_jsonpath_failed_vw__byexample {\n\tcheck_category?: string\n\tdataset_name?: string\n\tnr_check_names?: number\n\trecord_json?: string\n\trecord_jsonpath?: string\n\tsession_start_ts?: string\n\toffset?: number\n\tlimit? : number\n}\n\nexport interface catchsolve_noiodh__test_dataset_history_vw__byexample {\n\tcheck_category?: string\n\tcheck_stats?: string\n\tdataset_name?: string\n\tsession_start_ts?: string\n}\n\nexport interface catchsolve_noiodh__test_dataset_max_ts_vw__byexample {\n\tdataset_img_url?: string\n\tdataset_name?: string\n\tfailed_records?: number\n\tsession_start_ts?: string\n\ttested_records?: number\n}\n\nexport interface catchsolve_noiodh__test_dataset_record_check_failed__byexample {\n\tcheck_category?: string\n\tcheck_name?: string\n\tdataset_name?: string\n\tid?: number\n\timpacted_attributes_csv?: string\n\tproblem_hint?: string\n\trecord_json?: string\n\trecord_jsonpath?: string\n\tsession_start_ts?: string\n\toffset?: number\n\tlimit? : number\n}\n\n// end interfaces","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\nexport function throwNPE(): never {\n\tthrow new Error('unexpected null or undefined value')\n}\n\n// use this function instead of <Class> to add runtime checking\nexport function cs_cast<T extends object>(tc: { new(...args: any): T }, x: any): T\n{\n\tif (x === undefined)\n\t\tthrow new Error('runtime cast: x is undefined instead of ' + tc.name);\n\tif (x === null)\n\t\tthrow new Error('runtime cast: x is null instead of ' + tc.name);\n\tif (typeof x !== 'object')\n\t\tthrow new Error('runtime cast: this function check only objects <T extends object>, instead of ' + (typeof x));\n\tif (!(x instanceof tc))\n\t\tthrow new Error('runtime cast: x with type: ' + x.constructor.name + ' does not match required type: ' + tc.name);\t\n\treturn x\n}\n\nexport function cs_notnull<T>(x: T|null): T\n{\n\tif (x === null)\n\t\tthrow new Error('unexpected null value');\n\treturn x\n}","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nimport { DatasetCardComponent } from './DatasetCardComponent.js';\nimport { Loader } from './Loader.js';\nimport { API3 } from './api/api3.js';\nimport { cs_cast } from './quality.js';\n\nexport class StandardDashboardsComponent extends HTMLElement\n{\n\tsroot\n\t\n\tboxContainer;\n\t\n\tboxes: DatasetCardComponent[] = []\n\ttitles: string[] = []\n\n\tconstructor()\n\t{\n\t\tsuper()\n\t\t\n\t\tthis.sroot = this.attachShadow({ mode: 'open' })\n\t\tthis.sroot.innerHTML = `\n\t\t\t<link rel=\"stylesheet\" href=\"index.css\">\n\t\t\t<div class=\"ProjectsElement\">\n\t\t\t\t<div class=\"title\" style=\"padding: 1rem\">standard dashboards</div>\n\t\t\t\t<div class=\"searchbar\">\n\t\t\t\t\t<input>  <span class=\"clearinput\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"container\"></div>\n\t\t\t</div>\n\t\t`\n\t\tthis.boxContainer = cs_cast(HTMLDivElement, this.sroot.querySelector('.container'))\n\n\t\tthis.boxContainer.textContent = (\"loading ...\");\n\t\t\n\t\tconst refreshlist = () => {\n\t\t\tfor (let b = 0; b < this.titles.length; b++)\n\t\t\t\tif (this.titles[b].toLowerCase().indexOf(input.value.toLowerCase()) >= 0)\n\t\t\t\t\tthis.boxes[b].style.display = 'block'\n\t\t\t\telse\n\t\t\t\t\tthis.boxes[b].style.display = 'none'\n\t\t}\n\n\t\tconst input = this.sroot.querySelector('input')!\n\t\tinput.oninput = refreshlist\n\t\t\n\t\tconst clearinput = <HTMLSpanElement> this.sroot.querySelector('.clearinput')!\n\t\tclearinput.onclick = () => {\n\t\t\tinput.value = ''\n\t\t\trefreshlist()\n\t\t}\n\t\t\n\t}\n\t\n\n\tasync refresh()\n\t{\n\t\tthis.boxes = []\n\t\tthis.titles = []\n\t\tthis.boxContainer.textContent = ('');\n\t\tconst loader = new Loader();\n\t\tthis.boxContainer.appendChild(loader)\n\t\tconst json = await API3.list__catchsolve_noiodh__test_dataset_max_ts_vw({})\n\t\tloader.remove();\n\t\tconsole.log(json)\n\t\tfor (let dataset of json)\n\t\t{\n\t\t\tconst box = new DatasetCardComponent();\n\t\t\tthis.boxContainer.appendChild(box)\n\t\t\tbox.refresh(dataset)\n\t\t\tthis.boxes.push(box)\n\t\t\tthis.titles.push(dataset.dataset_name)\n\t\t}\n\t\t\n\t} \n}\n\ncustomElements.define('cs-standard-dashboards-element', StandardDashboardsComponent)","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nimport { cs_cast, throwNPE } from \"./quality.js\";\n\nimport { LabelAndData } from \"./LabelAndData.js\"\nimport { catchsolve_noiodh__test_dataset_max_ts_vw__row } from \"./api/api3.js\";\n\nexport class DatasetCardComponent extends HTMLElement\n{\n\tdtitle\n\timg\n\tcheckrecs\n\tcheckattr\n\tfailedrecs\n\tlastupdate\n\t\n\tconstructor()\n\t{\n\t\tsuper()\n\t\tconst sroot = this.attachShadow({mode: 'open'})\n\t\tsroot.innerHTML = `\n\t\t\t<style>\n\t\t\t\t:host {\n\t\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\t\tmargin: 0.5rem;\n\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\twidth: 13rem;\n\t\t\t\t\tbox-shadow: 4px 4px #ccc;\n\t\t\t\t}\n\t\t\t\t.title {\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tmargin-top: .7rem;\n\t\t\t\t\tmargin-bottom: 0.3rem;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: 2rem;\n\t\t\t\t\tline-height: 1rem;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t:host(:hover) .title {\n\t\t\t\t\ttext-decoration: underline;\n\t\t\t\t}\n\t\t\t\t */\n\t\t\t\t\n\t\t\t\t.ts {\n\t\t\t\t\tfont-size: 0.7rem\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.view_dashboard {\n\t\t\t\t\t/* background-color: var(--dark-background); */\n\t\t\t\t\tbackground-color: rgb(71, 105, 41);\n\t\t\t\t\tcolor: #ddd;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tpadding: 0.6rem;\n\t\t\t\t}\n\t\t\t\t.view_dashboard:hover {\n\t\t\t\t\tbackground-color: rgb(35, 75, 20);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.wrapper {\n\t\t\t\t\tpadding: 1rem;\n\t\t\t\t}\n\n\t\t\t\t.lastupdate {\n\t\t\t\t\tmargin-top: 0.4rem;\n\t\t\t\t\tfont-size: 0.7rem;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\timg {\n\t\t\t\t\theight: 100px;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\tmargin-bottom: 0.5rem;\n\t\t\t\t}\n\t\n\t\t\t</style>\n\t\t\t<div class=\"wrapper\">\n\t\t\t\t<div class=\"title\">XXX</div>\n\t\t\t\t<img class=\"img\">\n\t\t\t\t<cs-label-and-data class=\"checktrec\">checked records</cs-label-and-data>\n\t\t\t\t<cs-label-and-data class=\"checkattr\" style=\"display: none\">checked attributes</cs-label-and-data>\n\t\t\t\t<cs-label-and-data class=\"totissues\" xstyle=\"display: none\">total issues</cs-label-and-data>\n\t\t\t\t<div class=\"lastupdate\">\n\t\t\t\t\t <span class=\"data\"></span>\n\t\t\t\t\t<span></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"view_dashboard\">View dashboard</div>\n\t\t`\n\n\t\tcustomElements.upgrade(sroot)\n\n\t\tthis.checkrecs  = cs_cast(LabelAndData,      sroot.querySelector('.checktrec'))\n\t\tthis.checkattr  = cs_cast(LabelAndData,      sroot.querySelector('.checkattr'))\n\t\tthis.failedrecs = cs_cast(LabelAndData,     sroot.querySelector('.totissues'))\n\t\tthis.dtitle     = cs_cast(HTMLDivElement,    sroot.querySelector('.title'))\n\t\tthis.img        = cs_cast(HTMLImageElement,  sroot.querySelector('.img'))\n\t\tthis.lastupdate = cs_cast(HTMLSpanElement,      sroot.querySelector('.lastupdate .data'))\n\t\t\t\t\n\t\t// this.img.style.display = 'none';\n\t\t\n\t\tthis.checkrecs.setLabel('checked recs')\n\t\tthis.checkattr.setLabel('checked attrs')\n\t\tthis.failedrecs.setLabel('quality-assured recs')\n\t\t\n\t\t// this.failedrecs.setSeverity(\"fail\")\n\t\t// this.failedrecs.setData('123')\n\n\t}\n\n\t\n\trefresh(dataset: catchsolve_noiodh__test_dataset_max_ts_vw__row)\n\t{\n\t\tconst datestr = dataset.session_start_ts\n\t\tconst date = new Date(datestr)\n\t\t\n\t\tconst dateformat = new Intl.DateTimeFormat('it-IT', {\n\t\t\tyear: 'numeric',\n\t\t\tmonth: '2-digit',\n\t\t\tday: '2-digit',\n\t\t\thour: '2-digit',\n\t\t\tminute: \"2-digit\",\n\t\t\ttimeZone: 'Europe/Rome'\n\t\t}).format(date)\n\t\t\n\t\tthis.dtitle.textContent = dataset.dataset_name\n\t\tthis.img.src = dataset.dataset_img_url.length > 0 ? dataset.dataset_img_url : 'dataset-placeholder.png'\n\t\tthis.checkrecs.setData('' + dataset.tested_records)\n\t\tthis.checkattr.setData('123')\n\t\tthis.failedrecs.setData('' + (dataset.tested_records - dataset.failed_records))\n\t\tconst quality_ratio = dataset.tested_records == 0 ? 100 : dataset.failed_records / dataset.tested_records\n\t\tif (quality_ratio < 0.1)\n\t\t\tthis.failedrecs.setQualityLevel(\"good\")\n\t\telse if (quality_ratio < 0.3)\n\t\t\tthis.failedrecs.setQualityLevel(\"warn\")\n\t\telse\n\t\t\tthis.failedrecs.setQualityLevel(\"fail\")\n\t\tthis.lastupdate.textContent = dateformat\n\t\tthis.onclick = () => {\n\t\t\tlocation.hash = '#page=dataset-categories' + '&dataset_name=' + dataset.dataset_name \n\t\t\t\t\t\t\t+ \"&session_start_ts=\" + dataset.session_start_ts\n\t\t\t\t\t\t\t+ \"&failed_records=\" + dataset.failed_records\n\t\t\t\t\t\t\t+ \"&tested_records=\" + dataset.tested_records\n\t\t\twindow.scrollTo(0,0);\n\t\t}\n\t}\n}\n\n\ncustomElements.define('cs-dataset-box', DatasetCardComponent)\n","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nimport { cs_cast, throwNPE } from \"./quality.js\";\n\nexport class LabelAndData extends HTMLElement\n{\n\tlabel\n\tdata \n\t\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tconst sroot = this.attachShadow({mode: 'open'});\n\t\tsroot.innerHTML = `\n\t\t<style>\n\t\t\t:host {\n\t\t\t\tdisplay: flex;\n\t\t\t\tborder-top: 1px solid #ccc;\n\t\t\t\tpadding-top: 0.3rem;\n\t\t\t\tpadding-bottom: 0.3rem;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t\tspan {\n\t\t\t\tfont-size: 0.7rem;\n\t\t\t}\n\t\t\tspan.label {\n\t\t\t\tflex-grow: 1;\n\t\t\t\tmargin-right: 0.3rem;\n\t\t\t\tpadding: 0.2rem\n\t\t\t}\n\t\t\tspan.data {\n\t\t\t\tpadding: 0.2rem;\n\t\t\t\tborder-radius: 0.3rem;\n\t\t\t\tmargin-right: 0.3rem;\n\t\t\t\tbackground-color: var(--dark-background);\n\t\t\t\tcolor: #ddd;\n\t\t\t\tmin-width: 2rem;\n\t\t\t\ttext-align: right;\n\t\t\t}\n\t\t\t:host(.fail) span.label {\n\t\t\t\tbackground-color: #faa;\n\t\t\t\tcolor: #400;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t\t:host(.good) span.label {\n\t\t\t\tbackground-color: #afa;\n\t\t\t\tcolor: #040;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t\t:host(.warn) span.label {\n\t\t\t\tbackground-color: #ffa;\n\t\t\t\tcolor: #440;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\t\t</style>\n\t\t<span class=\"data\">.</span>\n\t\t<span class=\"label\"></span>\n\t\t`\n\t\t\n\t\tthis.label = cs_cast(HTMLSpanElement, sroot.querySelector('.label'))\n\t\tthis.setLabel(this.getAttribute('label') !== null ? this.getAttribute('label')! : 'label')\n\t\tthis.data  = cs_cast(HTMLSpanElement, sroot.querySelector('.data'))\n\t\t\n\t}\n\t\n\tsetLabel(s: string)\n\t{\n\t\tthis.label.textContent = s\n\t}\n\n\tsetData(s: string)\n\t{\n\t\tthis.data.textContent = s\n\t}\n\t\n\tsetQualityLevel(severity: \"good\" | \"warn\" | \"fail\")\n\t{\n\t\tthis.classList.add(severity)\n\t}\n\t\n}\n\ncustomElements.define('cs-label-and-data', LabelAndData)\n","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nimport { cs_cast, throwNPE } from \"./quality.js\";\nimport {API3, catchsolve_noiodh__test_dataset_record_check_failed__row} from './api/api3.js';\nimport { OpenCloseSection } from \"./OpenCloseSection.js\";\nimport { SectionRow } from \"./SectionRow.js\";\nimport { Loader } from \"./Loader.js\";\nimport { DatasetIssueCategoryComponent } from \"./DatasetIssueCategoryComponent.js\";\nimport { GeneralInfoAndSettings } from \"./GeneralInfoAndSettings.js\";\n\nexport class DatasetIssuesDetail extends HTMLElement\n{\n\t\n\tcontainer \n\t\n\tlast_session_start_ts: string|null = null\n\tlast_dataset_name: string|null = null\n\tlast_check_category: string|null = null\n\tlast_failed_records: number|null = null\n\tlast_tot_records: number|null = null\n\t\n\tcurrent_tab: 'issues' | 'records' = 'issues'\n\t\n\tsroot\n\t\n\tcanvas\n\t\n\t// connected_promise\n\t// connected_func: (s: null) => void = s => null\n\t\n\tchartjs_success: (s: Chart) => void\n\tchartjs_promise: Promise<Chart>\n\n\tissues: HTMLSpanElement;\n\trecords: HTMLSpanElement;\n    // info_and_settings: GeneralInfoAndSettings;\n\n\tconnectedCallback()\n\t{\n\t\t// chartjs need to be created when element is attached into the dom\n\t\tconst chart = new Chart(this.canvas, {\n\t\t\ttype: 'line',\n\t\t\tdata: {\n\t\t\t\tlabels: ['-5','-4','-3', '-2', '-1'],\n\t\t\t\tdatasets: []\n\t\t\t},\n\t\t\toptions: {\n\t\t\t\tscales: {\n\t\t\t\t\ty: {\n\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\tbeginAtZero: true\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.chartjs_success(chart)\n\t}\n\t\n\tconstructor() {\n\t\tsuper()\n\t\tthis.chartjs_success = (s) => {} // dummy initialization, next line will init chartjs_success but compiler don't understand this!\n\t\tthis.chartjs_promise = new Promise(s => this.chartjs_success = s)\n\t\tthis.sroot = this.attachShadow({ mode: 'open' })\n\t\tthis.sroot.innerHTML = `\n\t\t\t\t<style>\n\t\t\t\t\t:host {\n\t\t\t\t\t\tpadding: 0.5rem;\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t\t.container {\n\t\t\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\t\t\tborder-radius: 0.3rem;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.container > * {\n\t\t\t\t\t\tborder-bottom: 1px solid #ccc;\n\t\t\t\t\t}\n\t\t\t\t\t.header {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t}\n\t\t\t\t\t.header .chart {\n\t\t\t\t\t\twidth: 50%;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.actions {\n\t\t\t\t\t\tborder: 1px solid black;\n\t\t\t\t\t\twidth: 10rem;\n\t\t\t\t\t\tmargin-left: auto;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tborder-radius: 0.4rem;\n\t\t\t\t\t\tmargin-bottom: 0.5rem;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.actions span.selected {\n\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\tbackground-color: black;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.actions span {\n\t\t\t\t\t\tflex-grow: 50;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.nextpagebutton {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin: auto;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground-color: black;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\n\n\t\t\t\t\n\t\t\t\t</style>\n\t\t\t\t<!-- <img src=\"kpi-detail.png\" style=\"max-width: 100%\"> -->\n\t\t\t\t<div class=\"header\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<cs-dataset-issue-category></cs-dataset-issue-category>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"chart\">\n\t\t\t\t\t\t<canvas></canvas>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--<cs-general-info-and-settings></cs-general-info-and-settings>-->\n\t\t\t\t</div>\n\t\t\t\t<div style=\"width: calc(100% - 20px)\">\n\t\t\t\t\t<div style=\"text-align: right\" class=\"actions\">\n\t\t\t\t\t\t<span class=\"issues\">Issues</span>\n\t\t\t\t\t\t<span class=\"records\">Records</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"container\"></div>\n\t\t\t\t</div>\n\t\t\t\t`\n\n\t\tcustomElements.upgrade(this.sroot)\n\n\t\tthis.container = cs_cast(HTMLDivElement, this.sroot.querySelector('.container'))\n\t\t\n\t\tthis.issues = cs_cast(HTMLSpanElement, this.sroot.querySelector('.issues'))\n\t\tthis.records = cs_cast(HTMLSpanElement, this.sroot.querySelector('.records'))\n\t\t\n\t\tthis.issues.onclick = () => {\n\t\t\tthis.current_tab = 'issues'\n\t\t\tif (this.last_session_start_ts != null && this.last_dataset_name != null && this.last_check_category != null\n\t\t\t\t&& this.last_failed_records != null && this.last_tot_records != null)\n\t\t\t\tthis.refresh(this.last_session_start_ts, this.last_dataset_name, this.last_check_category, this.last_failed_records, this.last_tot_records)\n\t\t}\n\t\t\n\t\tthis.records.onclick = () => {\n\t\t\tthis.current_tab = 'records'\n\t\t\tif (this.last_session_start_ts != null && this.last_dataset_name != null && this.last_check_category != null\n\t\t\t\t&& this.last_failed_records != null && this.last_tot_records != null)\n\t\t\t\tthis.refresh(this.last_session_start_ts, this.last_dataset_name, this.last_check_category, this.last_failed_records, this.last_tot_records)\n\t\t}\n\t\t\n\t\tthis.canvas = cs_cast(HTMLCanvasElement, this.sroot.querySelector('canvas'));\n\t\t\n\t\t// this.info_and_settings = cs_cast(GeneralInfoAndSettings, this.sroot.querySelector('cs-general-info-and-settings'));\n\n\n\t}\n\t\n\textractHumanReadableName(record_jsonpath: string, json: string): string\n\t{\n\t\tlet ret = '';\n\t\tfor (let fn of ['sname', 'mvalidtime', 'mvalue', 'AccoDetail.de.Name', 'Detail.de.Title'])\n\t\t{\n\t\t\tconst fn_parts = fn.split('.')\n\t\t\tlet val = JSON.parse(json)\n\t\t\tfor (let p of fn_parts)\n\t\t\t{\n\t\t\t\tval = val[p]\n\t\t\t\tif (val === undefined)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// const val = start[fn] \n\t\t\tif (val !== undefined)\n\t\t\t\tret += (ret === '' ? '' : ', ') + fn + '=' + JSON.stringify(val)\n\t\t}\n\t\tif (ret == '')\n\t\t\tret = record_jsonpath\n\t\treturn ret;\n\t}\n\t\n\tgroupRecords(list: {record_json: string}[]): {[k:string]: any[]}\n\t{\n\t\tconst groupBy: {[k:string]: any[]} = {}\n\t\tfor (let k = 0; k < list.length; k++)\n\t\t{\n\t\t\tconst json = JSON.parse(list[k].record_json);\n\t\t\tlet sname = json['sname'];\n\t\t\tif (typeof sname !== 'string')\n\t\t\t\tsname = ''\n\t\t\tlet prev_arr = groupBy[sname]\n\t\t\tprev_arr = prev_arr === undefined ? [] : prev_arr\n\t\t\tprev_arr.push(list[k])\n\t\t\tgroupBy[sname] = prev_arr\n\t\t}\n\t\treturn groupBy; \n\t}\n\t\n\tasync refresh(p_session_start_ts: string, p_dataset_name: string, p_category_name: string, p_failed_records: number, p_tot_records: number) {\n\t\t\n\t\tthis.last_session_start_ts = p_session_start_ts\n\t\tthis.last_dataset_name = p_dataset_name\n\t\tthis.last_check_category = p_category_name\n\t\tthis.last_failed_records = p_failed_records\n\t\tthis.last_tot_records = p_tot_records\n\t\t\n\t\t// this.info_and_settings.refresh(p_session_start_ts, p_dataset_name, p_failed_records, p_tot_records)\n\t\t\n\t\tconsole.log(p_session_start_ts)\n\t\tconsole.log(p_dataset_name)\n\t\tconsole.log(p_category_name);\n\t\t\n\t\t(async () => {\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tconst data = await API3.list__catchsolve_noiodh__test_dataset_history_vw({\n\t\t\t\t\t\tdataset_name: this.last_dataset_name!,\n\t\t\t\t\t\tcheck_category: this.last_check_category!\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t// const goodarr  = []\n\t\t\t\t\t// const failarr  = []\n\t\t\t\t\t\n\t\t\t\t\tconst labels   = []\n\t\t\t\t\tconst datasets = []\n\t\t\t\t\t\n\t\t\t\t\tfor (let x = 0; x < data.length; x++)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst row = data[x]\n\t\t\t\t\t\tlabels.push(row.session_start_ts.slice(0,16).replace('T', ' '))\n\t\t\t\t\t\tconst check_stats = JSON.parse(row.check_stats);\n\t\t\t\t\t\tconsole.log(check_stats)\n\t\t\t\t\t\tfor (let c = 0; c < check_stats.length; c++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst check_stat = check_stats[c]\n\t\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\t\tfor (let d = 0; d < datasets.length; d++)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (datasets[d].label == check_stat.check_name)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdatasets[d].data.push(check_stat.failed_recs)\n\t\t\t\t\t\t\t\t\tfound = true\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!found)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdatasets.push({\n\t\t\t\t\t\t\t\t\tlabel: check_stat.check_name,\n\t\t\t\t\t\t\t\t\tdata: [check_stat.failed_recs],\n\t\t\t\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\t\t\t\tbackgroundColor: '#aaa',\n\t\t\t\t\t\t\t\t\tborderColor: '#aaa',\n\t\t\t\t\t\t\t\t\ttension: 0.1\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tgoodarr.push(data[x].tested_records - data[x].failed_recs)\n\t\t\t\t\t\tfailarr.push(data[x].failed_recs)\n\t\t\t\t\t\t */\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconst chartjs = await this.chartjs_promise\n\t\t\t\t\tchartjs.data.labels = labels\n\t\t\t\t\tchartjs.data.datasets = datasets\n\t\t\t\t\t\n\t\t\t\t\t/*\n\t\t\t\t\tchartjs.data.datasets = [\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'fail trend',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: failarr,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: '#222',\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderColor: '#222',\n\t\t\t\t\t\t\t\t\t\t\t\t\ttension: 0.1\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'total trend',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: goodarr,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: '#aaa',\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderColor: '#aaa',\n\t\t\t\t\t\t\t\t\t\t\t\t\ttension: 0.1\n\t\t\t\t\t\t\t\t\t\t\t\t},\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t*/\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tchartjs.update()\n\t\t\t\t\t\t\t\t\t\n\t\t})();\n\t\t\n\t\tconst category = cs_cast(DatasetIssueCategoryComponent, this.sroot.querySelector('cs-dataset-issue-category'))\n\t\tcategory.hideMoreDiv()\n\t\tcategory.refresh(\n\t\t{\n\t\t\tdataset_name: p_dataset_name,\n\t\t\tsession_start_ts: p_session_start_ts,\n\t\t\tcheck_category: p_category_name,\n\t\t\tfailed_records: p_failed_records,\n\t\t\ttot_records: p_tot_records\n\t\t})\n\t\t\n\t\tthis.container.textContent = ''\n\t\t\n\t\tif (this.current_tab === 'issues')\n\t\t{\n\t\t\tthis.records.classList.remove('selected')\n\t\t\tthis.issues.classList.add('selected')\n\t\t\t\n\t\t\tconst loader = new Loader();\n\t\t\tthis.container.appendChild(loader)\n\t\t\n\t\t\tconst json = await API3.list__catchsolve_noiodh__test_dataset_check_category_check_name_record_record_failed_vw({\n\t\t\t\tsession_start_ts: p_session_start_ts,\n\t\t\t\tdataset_name: p_dataset_name,\n\t\t\t\tcheck_category: p_category_name\n\t\t\t})\n\n\t\t\tloader.remove();\n\t\n\t\t\tfor (let i = 0; i < json.length; i++)\n\t\t\t{\n\t\t\t\tconst issue = json[i]\n\t\t\t\t// console.log(issue)\n\t\t\t\tconst section = new OpenCloseSection()\n\t\t\t\tsection.refresh(issue.check_name, 'failed: ' + issue.nr_records + ' records')\n\t\t\t\tthis.container.appendChild(section)\n\t\t\t\t\n\t\t\t\tsection.onopen = async () => {\n\t\t\t\t\t\n\t\t\t\t\tconst moreButton = document.createElement('button')\n\t\t\t\t\tmoreButton.classList.add('nextpagebutton')\n\t\t\t\t\tmoreButton.textContent = 'next 100'\n\t\t\t\t\tsection.addElementToContentArea(moreButton)\n\t\t\t\t\tlet list_offset = 0\n\t\t\t\t\tconst nextFun = async () => {\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst json2 = await API3.list__catchsolve_noiodh__test_dataset_record_check_failed({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsession_start_ts: p_session_start_ts,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdataset_name: p_dataset_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheck_category: p_category_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheck_name: issue.check_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlimit: 100,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toffset: list_offset\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// const list = groupBy[keys[0]]\n\t\t\t\t\t\tfor (let k2 = 0; k2 < json2.length; k2++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst sectionRow2 = new SectionRow();\n\t\t\t\t\t\t\t// section.addElementToContentArea(sectionRow2)\n\t\t\t\t\t\t\tmoreButton.parentElement!.insertBefore(sectionRow2, moreButton)\n\t\t\t\t\t\t\tsectionRow2.refresh(this.extractHumanReadableName(json2[k2].record_jsonpath, json2[k2].record_json))\n\t\t\t\t\t\t\t// sectionRow2.refresh(json2[k2].problem_hint)\n\t\t\t\t\t\t\tsectionRow2.onclick = () => {\n\t\t\t\t\t\t\t\talert(json2[k2].record_json)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist_offset += 100\n\t\t\t\t\t}\n\t\t\t\t\tmoreButton.onclick = nextFun\n\t\t\t\t\tnextFun()\n\t\t\t\t\t\n\t\t\t\t\t/*\n\t\t\t\t\t//console.log('sezione aperta, ricarico!')\n\t\t\t\t\tconst json2 = await API3.list__catchsolve_noiodh__test_dataset_record_check_failed({\n\t\t\t\t\t\t\t\tsession_start_ts: p_session_start_ts,\n\t\t\t\t\t\t\t\tdataset_name: p_dataset_name,\n\t\t\t\t\t\t\t\tcheck_category: p_category_name,\n\t\t\t\t\t\t\t\tcheck_name: issue.check_name\n\t\t\t\t\t});\n\t\t\t\t\tconst groupBy = this.groupRecords(json2)\n\t\t\t\t\tconst keys = Object.keys(groupBy)\n\t\t\t\t\tconsole.log(keys)\n\t\t\t\t\tif (keys.length == 1 && keys[0] == '')\n\t\t\t\t\t{\n\t\t\t\t\t\tconst moreButton = document.createElement('button')\n\t\t\t\t\t\tmoreButton.textContent = 'next 10'\n\t\t\t\t\t\tsection.addElementToContentArea(moreButton)\n\t\t\t\t\t\tconst nextFun = () => {\n\t\t\t\t\t\t\tconst list = groupBy[keys[0]]\n\t\t\t\t\t\t\tfor (let k2 = 0; k2 < list.length; k2++)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst sectionRow2 = new SectionRow();\n\t\t\t\t\t\t\t\tsection.addElementToContentArea(sectionRow2)\n\t\t\t\t\t\t\t\t// sectionRow2.refresh(this.extractHumanReadableName(list[k2].record_jsonpath, list[k2].record_json))\n\t\t\t\t\t\t\t\tsectionRow2.refresh(list[k2].problem_hint)\n\t\t\t\t\t\t\t\tsectionRow2.onclick = () => {\n\t\t\t\t\t\t\t\t\talert(list[k2].record_json)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmoreButton.onclick = nextFun\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (let k = 0; k < keys.length; k++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst sectionRow = new OpenCloseSection();\n\t\t\t\t\t\t\tsection.addElementToContentArea(sectionRow)\n\t\t\t\t\t\t\tsectionRow.refresh(keys[k], '' + groupBy[keys[k]].length + ' records')\n\t\t\t\t\t\t\tsectionRow.onclick = () => {\n\t\t\t\t\t\t\t\tconst list = groupBy[keys[k]]\n\t\t\t\t\t\t\t\tconsole.log(list)\n\t\t\t\t\t\t\t\tfor (let k2 = 0; k2 < list.length; k2++)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst sectionRow2 = new SectionRow();\n\t\t\t\t\t\t\t\t\tsectionRow.addElementToContentArea(sectionRow2)\n\t\t\t\t\t\t\t\t\t// sectionRow2.refresh(this.extractHumanReadableName(list[k2].record_jsonpath, list[k2].record_json))\n\t\t\t\t\t\t\t\t\tsectionRow2.refresh(list[k2].problem_hint)\n\t\t\t\t\t\t\t\t\tsectionRow2.onclick = () => {\n\t\t\t\t\t\t\t\t\t\talert(list[k2].record_json)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\tif (this.current_tab === 'records')\n\t\t{\n\t\t\tthis.issues.classList.remove('selected')\n\t\t\tthis.records.classList.add('selected')\n\t\t\t\n\t\t\tconst moreButton = document.createElement('button')\n\t\t\tmoreButton.classList.add('nextpagebutton')\n\t\t\tmoreButton.textContent = 'next 100'\n\t\t\tthis.container.appendChild(moreButton)\n\t\t\tlet list_offset = 0\n\t\t\tconst nextFun = async () => {\n\n\t\t\t\tconst loader = new Loader();\n\t\t\t\tthis.container.appendChild(loader)\n\n\t\t\t\tconst list = await API3.list__catchsolve_noiodh__test_dataset_check_category_record_jsonpath_failed_vw({\n\t\t\t\t\tsession_start_ts: p_session_start_ts,\n\t\t\t\t\tdataset_name: p_dataset_name,\n\t\t\t\t\tcheck_category: p_category_name,\n\t\t\t\t\toffset: list_offset,\n\t\t\t\t\tlimit: 100\n\t\t\t\t});\n\t\t\t\tloader.remove();\n\t\t\t\tfor (let k2 = 0; k2 < list.length; k2++)\n\t\t\t\t{\n\t\t\t\t\tconst sectionRow2 = new OpenCloseSection();\n\t\t\t\t\t// this.container.appendChild(sectionRow2)\n\t\t\t\t\tmoreButton.parentElement!.insertBefore(sectionRow2, moreButton)\n\t\t\t\t\tsectionRow2.refresh(this.extractHumanReadableName(list[k2].record_jsonpath, list[k2].record_json), '' + list[k2].nr_check_names + ' check failed')\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tsectionRow2.onclick = async () => {\n\t\t\t\t\t\t\tconst json2 = await API3.list__catchsolve_noiodh__test_dataset_record_check_failed({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsession_start_ts: p_session_start_ts,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdataset_name: p_dataset_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheck_category: p_category_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecord_jsonpath: list[k2].record_jsonpath\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tfor (let k = 0; k < json2.length; k++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst sectionRow = new SectionRow();\n\t\t\t\t\t\t\tsectionRow2.addElementToContentArea(sectionRow)\n\t\t\t\t\t\t\tsectionRow.refresh(\"failed: \" + json2[k].check_name)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlist_offset += 100\n\t\t\t}\n\t\t\tmoreButton.onclick = nextFun\n\t\t\tnextFun()\n\n\t\n\t\t\t/*\n\t\t\tconst groupBy = this.groupRecords(json)\n\t\t\tconst keys = Object.keys(groupBy)\n\t\t\tconsole.log(keys)\n\t\t\tif (keys.length == 1 && keys[0] == '')\n\t\t\t{\n\t\t\t\tconst list = groupBy[keys[0]]\n\t\t\t\tfor (let k2 = 0; k2 < list.length; k2++)\n\t\t\t\t{\n\t\t\t\t\tconst sectionRow2 = new OpenCloseSection();\n\t\t\t\t\tthis.container.appendChild(sectionRow2)\n\t\t\t\t\tsectionRow2.refresh(this.extractHumanReadableName(list[k2].record_jsonpath, list[k2].record_json), '' + list[k2].nr_check_names + ' check failed')\n\t\t\t\t\tsectionRow2.onclick = async () => {\n\t\t\t\t\t\tconst json2 = await API3.list__catchsolve_noiodh__test_dataset_record_check_failed({\n\t\t\t\t\t\t\t\t\t\t\t\t\tsession_start_ts: p_session_start_ts,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataset_name: p_dataset_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcheck_category: p_category_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\trecord_jsonpath: list[k2].record_jsonpath\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tfor (let k = 0; k < json2.length; k++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst sectionRow = new SectionRow();\n\t\t\t\t\t\t\tsectionRow2.addElementToContentArea(sectionRow)\n\t\t\t\t\t\t\tsectionRow.refresh(\"failed: \" + json2[k].check_name)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (let k = 0; k < keys.length; k++)\n\t\t\t\t{\n\t\t\t\t\tconst sectionRow = new OpenCloseSection();\n\t\t\t\t\tthis.container.appendChild(sectionRow)\n\t\t\t\t\tsectionRow.refresh(keys[k], '' + groupBy[keys[k]].length + ' records')\n\t\t\t\t\tsectionRow.onclick = () => {\n\t\t\t\t\t\tconst list = groupBy[keys[k]]\n\t\t\t\t\t\tconsole.log(list)\n\t\t\t\t\t\tfor (let k2 = 0; k2 < list.length; k2++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst sectionRow2 = new OpenCloseSection();\n\t\t\t\t\t\t\tsectionRow.addElementToContentArea(sectionRow2)\n\t\t\t\t\t\t\tsectionRow2.refresh(this.extractHumanReadableName(list[k2].record_jsonpath, list[k2].record_json), list[k2].nr_check_names)\n\t\t\t\t\t\t\tsectionRow2.onclick = async (e) => {\n\t\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t\tconst json2 = await API3.list__catchsolve_noiodh__test_dataset_record_check_failed({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsession_start_ts: p_session_start_ts,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdataset_name: p_dataset_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheck_category: p_category_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecord_jsonpath: list[k2].record_jsonpath\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tfor (let k = 0; k < json2.length; k++)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst sectionRow = new SectionRow();\n\t\t\t\t\t\t\t\t\tsectionRow2.addElementToContentArea(sectionRow)\n\t\t\t\t\t\t\t\t\tsectionRow.refresh(json2[k].check_name)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t */\n\t\t}\n\t}\n}\n\ncustomElements.define('cs-dataset-issues-detail', DatasetIssuesDetail)\n","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nimport { cs_cast, throwNPE } from \"./quality.js\";\n\nexport class OpenCloseSection extends HTMLElement\n{\n\t\n\tcontent\n\topen = true \n\topenclose\n\tlabel\n\tactions\n\t\n\tonopen = () => {}\n\t\n\tconstructor() {\n\t\tsuper()\n\t\tconst sroot = this.attachShadow({ mode: 'open' })\n\t\tsroot.innerHTML = `\n\t\t\t\t<style>\n\t\t\t\t\t:host {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t\t.header {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t}\n\t\t\t\t\t.label {\n\t\t\t\t\t\tflex-grow: 1;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tpadding: 0.4rem;\n\t\t\t\t\t\tuser-select: none;\n\t\t\t\t\t}\n\t\t\t\t\t.openclose {\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tpadding: 0.4rem;\n\t\t\t\t\t\tuser-select: none;\n\t\t\t\t\t}\n\t\t\t\t\t.content {\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\ttransition: transform 1s;\n\t\t\t\t\t\ttransform-origin: top;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t/*\n\t\t\t\t\tspan.label::before {\n\t\t\t\t\t  content: \"\";\n\t\t\t\t\t  display: inline-block;\n\t\t\t\t\t  width: 8px;\n\t\t\t\t\t  height: 8px;\n\t\t\t\t\t  background-color: red;\n\t\t\t\t\t  border-radius: 50%;\n\t\t\t\t\t  margin-right: 5px;\n\t\t\t\t\t}\n\t\t\t\t\t */\n\t\t\t\t\t\n\t\t\t\t\t.nextpagebutton {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin: auto;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground-color: black;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t</style>\n\t\t\t\t<div class=\"header\">\n\t\t\t\t<span class=\"label\">title</span>\n\t\t\t\t<span class=\"actions\">actions</span>\n\t\t\t\t<span class=\"openclose\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"content\"></div>\n\t\t\t\t`\n\n\t\tcustomElements.upgrade(sroot)\n\t\tthis.label = cs_cast(HTMLSpanElement, sroot.querySelector('.label'))\n\t\tthis.actions = cs_cast(HTMLSpanElement, sroot.querySelector('.actions'))\n\t\tthis.content = cs_cast(HTMLDivElement, sroot.querySelector('.content'))\n\t\tthis.openclose = cs_cast(HTMLSpanElement, sroot.querySelector('.openclose'))\n\t\tthis.openclose.onclick = () => {\n\t\t\tthis.toggle();\n\t\t}\n\t\tthis.label.onclick = this.openclose.onclick\n\t\tthis.toggle();\n\t}\n\t\n\ttoggle()\n\t{\n\t\tthis.open = !this.open\n\t\tthis.content.style.height     = !this.open ? '0rem' : 'auto'\n\t\tthis.openclose.textContent    = !this.open ? '' : ''\n\t\tif (this.open)\n\t\t{\n\t\t\tthis.content.textContent = '' // svuola la sezione\n\t\t\tthis.onopen()\n\t\t}\n\t}\n\t\n\tasync refresh(label: string, actions: string) {\n\t\tthis.label.textContent = label\n\t\tthis.actions.textContent = actions\n\t}\n\t\n\taddElementToContentArea(e: HTMLElement)\n\t{\n\t\tthis.content.appendChild(e)\n\t}\n}\n\ncustomElements.define('cs-open-close-section', OpenCloseSection)\n","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nimport { cs_cast, throwNPE } from \"./quality.js\";\n\nexport class SectionRow extends HTMLElement\n{\n\tlabel\n\n\tconstructor() {\n\t\tsuper()\n\t\tconst sroot = this.attachShadow({ mode: 'open' })\n\t\tsroot.innerHTML = `\n\t\t\t\t<style>\n\t\t\t\t\t:host {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\tborder: 1px solid #eee;\n\t\t\t\t\t\tpadding: 1rem;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t</style>\n\t\t\t\t<span class=\"label\">title</span>\n\t\t\t\t`\n\n\t\tcustomElements.upgrade(sroot)\n\t\tthis.label = cs_cast(HTMLSpanElement, sroot.querySelector('.label'))\n\n\t}\n\t\n\t\n\tasync refresh(s: string) {\n\t\tthis.label.textContent = s;\n\t}\n\t\n}\n\ncustomElements.define('cs-section-row', SectionRow)\n","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\nimport { LabelAndData } from \"./LabelAndData.js\"\nimport { API3, catchsolve_noiodh__test_dataset_check_category_failed_recors_vw__row } from \"./api/api3.js\"\nimport { cs_cast } from \"./quality.js\"\n\n\nexport class DatasetIssueCategoryComponent extends HTMLElement\n{\n\t\n\ttemplate\n\t\n\tconnected_promise\n\tconnected_func: (s: null) => void = s => null\n\t\n\tmore_div\n\t\n\tconnectedCallback()\n\t{\n\t\tconsole.log('connected')\n\t\tthis.connected_func(null)\n\t}\n\t\n\tconstructor() {\n\t\tsuper()\n\t\tthis.connected_promise = new Promise(s => this.connected_func = s)\n\t\tconst sroot = this.attachShadow({ mode: 'open' })\n\t\tsroot.innerHTML = `\n\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t:host {\n\t\t\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\t\t\tbox-shadow: 4px 4px #ccc;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.category {\n\t\t\t\t\t\t\t\tborder: 1px solid gray;\n\t\t\t\t\t\t\t\twidth: 12rem;\n\t\t\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\t\t\t/* margin: 1rem; */\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.category > img {\n\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.category .category_name {\n\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\t\tmargin-top: 0.4rem;\n\t\t\t\t\t\t\t\tmargin-bottom: 0.4rem;\n\t\t\t\t\t\t\t\tline-height: 1rem;\n\t\t\t\t\t\t\t\theight: 2rem;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.frame {\n\t\t\t\t\t\t\t\tdisplay: flex\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.frame .content {\n\t\t\t\t\t\t\t\tflex-grow: 100;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.chartdiv {\n\t\t\t\t\t\t\t\twidth:  100px;\n\t\t\t\t\t\t\t\theight: 100px;\n\t\t\t\t\t\t\t\tmargin: auto;\n\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\tmargin-top: 0.4rem;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t.chartdiv .perc {\n\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\ttop:  calc(50% - 0.8rem);\n\t\t\t\t\t\t\t\tleft: calc(50% - 1.6rem);\n\t\t\t\t\t\t\t\tfont-size: 1.5rem;\n\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t\tcolor: #000;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdetails {\n\t\t\t\t\t\t\t\tmargin-top: 0.4rem;\n\t\t\t\t\t\t\t\tmargin-bottom: 0.4rem;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdetails > * {\n\t\t\t\t\t\t\t\tpadding: 0.5em;\n\t\t\t\t\t\t\t\tborder-bottom: 1px solid #ccc;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t.view_details {\n\t\t\t\t\t\t\t\t/* background-color: var(--dark-background); */\n\t\t\t\t\t\t\t\tbackground-color: rgb(71, 105, 41);\n\t\t\t\t\t\t\t\tcolor: #ddd;\n\t\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\t\tpadding: 0.6rem;\n\t\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t.view_details:hover {\n\t\t\t\t\t\t\t\tbackground-color: rgb(35, 75, 20);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t.lastupdate {\n\t\t\t\t\t\t\t\tmargin-top: 0.4rem;\n\t\t\t\t\t\t\t\tfont-size: 0.7rem;\n\t\t\t\t\t\t\t\tmargin-bottom: 0.4rem;\n\t\t\t\t\t\t\t\tmargin-left: 0.4rem;\n\t\t\t\t\t\t\t\tmargin-right: 0.4rem;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t.nr_records, details {\n\t\t\t\t\t\t\t\tmargin-left: 0.4rem;\n\t\t\t\t\t\t\t\tmargin-right: 0.4rem;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t</style>\n\t\t\t\t\t\t<div class=\"category\">\n\t\t\t\t\t\t\t<!-- <img src=\"kpi-pie-chart.png\"> -->\n\t\t\t\t\t\t\t<div class=\"chartdiv\">\n\t\t\t\t\t\t\t\t<div class=\"perc\">12%</div>\n\t\t\t\t\t\t\t\t<canvas class=\"chart\"></canvas>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"category_name\">Completeness</div>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t<cs-label-and-data label=\"quality-assured recs\" class=\"nr_records\"></cs-label-and-data>\n\t\t\t\t\t\t\t<div class=\"lastupdate\">\n\t\t\t\t\t\t\t\t<span class=\"data\"></span>\n\t\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!-- <div class=\"nr_records\">123</div> -->\n\t\t\t\t\t\t\t<div class=\"more\">\n\t\t\t\t\t\t\t\t<details>\n\t\t\t\t\t\t\t\t\t<summary>carried out tests</summary>\n\t\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t\t\t<div class=\"view_details\">View details</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;\n\n\t\tcustomElements.upgrade(sroot);\n\t\tthis.template = cs_cast(HTMLElement, sroot.querySelector('.category'));\n\t\tthis.more_div = cs_cast(HTMLElement, sroot.querySelector('.more'));\n\t}\n\t\n\thideMoreDiv()  {\n\t\tthis.more_div.style.display = 'none'\n\t}\n\t\n\tasync refresh(data: {dataset_name: string, tot_records: number, failed_records: number, check_category: string, session_start_ts: string})\n\t{\n\n\t\tconst cat = this.template\n\t\tthis.setup_chart(cat, data)\n\t\tconst cat_name = cs_cast(HTMLElement, cat.querySelector('.category_name'))\n\t\tcat_name.textContent = data.check_category\n\t\tconst failedelement = cs_cast(LabelAndData, cat.querySelector('.nr_records'))\n\t\tfailedelement.setData('' + (data.tot_records - data.failed_records))\n\t\tconst last_update = cs_cast(HTMLSpanElement, cat.querySelector('.lastupdate .data'))\n\t\tconst date = new Date(data.session_start_ts)\n\t\t\n\t\tconst perc = cs_cast(HTMLElement, cat.querySelector('.perc'))\n\t\tperc.textContent = '' + ((data.tot_records - data.failed_records) * 100 / data.tot_records).toFixed(1)\n\t\t\t\t\n\t\tconst dateformat = new Intl.DateTimeFormat('it-IT', {\n\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\tmonth: '2-digit',\n\t\t\t\t\tday: '2-digit',\n\t\t\t\t\thour: '2-digit',\n\t\t\t\t\tminute: \"2-digit\",\n\t\t\t\t\ttimeZone: 'Europe/Rome'\n\t\t\t\t}).format(date)\n\n\t\tlast_update.textContent = dateformat\n\n\t\tconst view_details = cs_cast(HTMLElement, cat.querySelector('.view_details'))\n\t\t\n\t\tview_details.onclick = () => {\n\t\t\tlocation.hash = '#page=summary&session_start_ts=' + data.session_start_ts + '&dataset_name=' + data.dataset_name + '&category_name=' + data.check_category +\n\t\t\t\t\t\t\t'&failed_records=' + data.failed_records + '&tot_records=' + data.tot_records \n\t\t}\n\t\t\n\t\tconst cat_details =  cs_cast(HTMLElement, cat.querySelector('details'))\n\t\t\n\t\tAPI3.list__catchsolve_noiodh__test_dataset_check_category_check_name_failed_recors_vw({\n\t\t\t\t\tsession_start_ts: data.session_start_ts,\n\t\t\t\t\tdataset_name : data.dataset_name,\n\t\t\t\t\tcheck_category: data.check_category\n\t\t\t\t}).then((checks) => {\n\t\t\t\t\tconsole.log(checks)\n\t\t\t\t\tfor (let i2 = 0; i2 < checks.length; i2++)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst div = document.createElement('div')\n\t\t\t\t\t\tdiv.textContent = checks[i2].check_name // + ' ' + checks[i2].failed_records +  ' / ' + checks[i2].tot_records \n\t\t\t\t\t\tcat_details.appendChild(div)\n\t\t\t\t\t}\n\t\t})\n\n\t}\n\n\tasync  setup_chart(cat: HTMLElement, arg1: {tot_records: number, failed_records: number}) {\n\t\tawait this.connected_promise\n\t\tconst chart = cs_cast(HTMLCanvasElement, cat.querySelector('.chart'));\n\t\t// const context = chart.getContext('2d');\n\t\t\t\t\t\tnew Chart(chart, \t\t\t\t{\n\t\t\t\t\t\t  type: 'doughnut',\n\t\t\t\t\t\t  data: {\n\t\t\t\t\t\t    labels: ['ok', 'fail'],\n\t\t\t\t\t\t    datasets: [\n\t\t\t\t\t\t      {\n\t\t\t\t\t\t        label: 'Dataset 1',\n\t\t\t\t\t\t        data: [arg1.tot_records - arg1.failed_records, arg1.failed_records, ],\n\t\t\t\t\t\t\t\tbackgroundColor: ['#0a0', '#222', ]\n\t\t\t\t\t\t      }\n\t\t\t\t\t\t    ]\n\t\t\t\t\t\t  },\n\t\t\t\t\t\t  options: {\n\t\t\t\t\t\t\tcutout: '80%',\n\t\t\t\t\t\t    responsive: true,\n\t\t\t\t\t\t    plugins: {\n\t\t\t\t\t\t      legend: {\n\t\t\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t\t        position: 'top',\n\t\t\t\t\t\t      },\n\t\t\t\t\t\t      title: {\n\t\t\t\t\t\t        display: false,\n\t\t\t\t\t\t        text: 'Chart.js Doughnut Chart'\n\t\t\t\t\t\t      }\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t  },\n\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t}\n\n\n}\n\ncustomElements.define('cs-dataset-issue-category', DatasetIssueCategoryComponent)\n","// SPDX-FileCopyrightText: 2024 Catch Solve di Davide Montesin\n//\n// SPDX-License-Identifier: AGPL-3.0-or-later\n\n\n\nimport { cs_cast, throwNPE } from \"./quality.js\";\nimport {API3, catchsolve_noiodh__test_dataset_check_category_failed_recors_vw__row} from './api/api3.js';\nimport { OpenCloseSection } from \"./OpenCloseSection.js\";\nimport { SectionRow } from \"./SectionRow.js\";\nimport { Loader } from \"./Loader.js\";\nimport { LabelAndData } from \"./LabelAndData.js\";\nimport { DatasetIssueCategoryComponent } from \"./DatasetIssueCategoryComponent.js\";\nimport { GeneralInfoAndSettings } from \"./GeneralInfoAndSettings.js\";\n\nexport class DatasetIssuesByCategories extends HTMLElement\n{\n\t\n\tcontent\n\t\n\tconnected_promise\n\tconnected_func: (s: null) => void = s => null\n\t\n\tconnectedCallback()\n\t{\n\t\tconsole.log('connected')\n\t\tthis.connected_func(null)\n\t}\n\t\n\tsroot\n\t\n\t// info_and_settings\n\t\n\tnoissues\n\t\n\tconstructor() {\n\t\tsuper()\n\t\tthis.connected_promise = new Promise(s => this.connected_func = s)\n\t\tthis.sroot = this.attachShadow({ mode: 'open' })\n\t\tthis.sroot.innerHTML = `\n\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t:host {\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.category {\n\t\t\t\t\t\t\t\tborder: 1px solid gray;\n\t\t\t\t\t\t\t\twidth: 12rem;\n\t\t\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\t\t\tmargin: 1rem;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.category > img {\n\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.category .category_name {\n\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.frame {\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: start;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.frame .content {\n\t\t\t\t\t\t\t\tflex-grow: 100;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: start;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.chartdiv {\n\t\t\t\t\t\t\t\twidth:  100px;\n\t\t\t\t\t\t\t\theight: 100px;\n\t\t\t\t\t\t\t\tmargin: auto;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdetails > *:nth-child(even) {\n\t\t\t\t\t\t\t  background-color: #ccc;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t.content > * {\n\t\t\t\t\t\t\t\tmargin-top: 1rem;\n\t\t\t\t\t\t\t\tmargin-left: 1rem;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.noissues {\n\t\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</style>\n\t\t\t\t\t\t<div class=\"frame\">\n\t\t\t\t\t\t\t<div class=\"noissues\">sound good, no problems found here!</div>\n\t\t\t\t\t\t\t<div class=\"content\"></div>\n\t\t\t\t\t\t\t<!--<cs-general-info-and-settings></cs-general-info-and-settings>-->\n\t\t\t\t\t\t\t<!--<img src=\"kpi-general-info.png\">-->\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;\n\t\tcustomElements.upgrade(this.sroot);\n\t\tthis.content = cs_cast(HTMLElement, this.sroot.querySelector('.content'));\n\t\t// this.info_and_settings = cs_cast(GeneralInfoAndSettings, this.sroot.querySelector('cs-general-info-and-settings'));\n\n\t\tthis.noissues = cs_cast(HTMLDivElement, this.sroot.querySelector('.noissues'))\n\t}\n\t\n\tasync refresh(p_session_start_ts: string, p_dataset_name: string, p_failed_records: number, p_tot_records: number) {\n\t\t\n\t\t// this.info_and_settings.refresh(p_session_start_ts, p_dataset_name, p_failed_records, p_tot_records);\n\t\t\n\t\tconst loader = new Loader()\n\t\tthis.content.appendChild(loader)\n\t\tconst resp = await API3.list__catchsolve_noiodh__test_dataset_check_category_failed_recors_vw({\n\t\t\tsession_start_ts: p_session_start_ts,\n\t\t\tdataset_name : p_dataset_name\n\t\t})\n\t\tloader.remove()\n\t\tconsole.log(resp) \n\t\tfor (let i = 0; i < resp.length; i++)\n\t\t{\n\t\t\tconst category = new DatasetIssueCategoryComponent();\n\t\t\tthis.content.appendChild(category);\n\t\t\tcategory.refresh(resp[i])\n\t\t}\n\t\tthis.noissues.style.display = resp.length == 0 ? 'block' : 'none';\n\t\t\t\n\t}\n\n\n}\n\ncustomElements.define('cs-dataset-categories', DatasetIssuesByCategories)\n\n","import Keycloak from 'keycloak-js';\nimport { jwtDecode } from 'jwt-decode';\n\nexport class AuthComponent extends HTMLElement {\n\tsroot\n\tkeycloak\n\n\tdiv_unauthenticated\n\tdiv_authenticated\n\n\tbutton_login\n\tuser_button\n\tuser_menu\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.sroot = this.attachShadow({ mode: 'open' });\n\t\tthis.sroot.innerHTML = `\n\t\t\t<link rel=\"stylesheet\" href=\"index.css\">\n\t\t\t<style>\n\t\t\t\t:host {\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tfont-family: sans-serif;\n\t\t\t\t}\n\t\t\t\t.display-none {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t\t.auth-container {\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\t\t\t\t.user-button {\n\t\t\t\t\tbackground: none;\n\t\t\t\t\tborder: none;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tfont-size: 1rem;\n\t\t\t\t}\n\t\t\t\t.user-menu {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 100%;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\t\tbox-shadow: 0 2px 6px rgba(0,0,0,0.2);\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\tmin-width: 120px;\n\t\t\t\t\tz-index: 10;\n\t\t\t\t}\n\t\t\t\t.user-menu.show {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\t\t\t\t.user-menu button {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tbackground: none;\n\t\t\t\t\tborder: none;\n\t\t\t\t\tpadding: 8px 12px;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t\t.user-menu button:hover {\n\t\t\t\t\tbackground: #eee;\n\t\t\t\t}\n\n\t\t\t\t/* Stile bottone login */\n\t\t\t\t.unauthenticated button {\n\t\t\t\t\tbackground-color: black;\n\t\t\t\t\tcolor: white;\n\t\t\t\t\ttext-transform: uppercase;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tborder: none;\n\t\t\t\t\tpadding: 8px 16px;\n\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\ttransition: background-color 0.2s;\n\t\t\t\t}\n\t\t\t\t.unauthenticated button:hover {\n\t\t\t\t\tbackground-color: #333;\n\t\t\t\t}\n\t\t\t</style>\n\t\t\t<div class=\"unauthenticated display-none\">\n\t\t\t\t<button>Login</button>\n\t\t\t</div>\n\t\t\t<div class=\"authenticated display-none auth-container\">\n\t\t\t\t<button class=\"user-button\">User </button>\n\t\t\t\t<div class=\"user-menu\">\n\t\t\t\t\t<button class=\"logout-button\">Logout</button>\n\t\t\t\t\t<!-- Altre voci future -->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.div_unauthenticated = this.sroot.querySelector('.unauthenticated')!;\n\t\tthis.div_authenticated = this.sroot.querySelector('.authenticated')!;\n\t\tthis.button_login = this.sroot.querySelector('.unauthenticated button') as HTMLButtonElement;\n\t\tthis.user_button = this.sroot.querySelector('.user-button') as HTMLButtonElement;\n\t\tthis.user_menu = this.sroot.querySelector('.user-menu')!;\n\n\t\tthis.keycloak = new Keycloak({\n\t\t\turl: \"https://auth.opendatahub.testingmachine.eu/auth/\",\n\t\t\trealm: \"noi\",\n\t\t\tclientId: \"odh-data-quality-web\"\n\t\t});\n\n\t\t(this.button_login as HTMLButtonElement).onclick = () => {\n\t\t\tthis.keycloak.login();\n\t\t};\n\n\t\t(this.user_button as HTMLButtonElement).onclick = (e: MouseEvent) => {\n\t\t\te.stopPropagation(); //  blocca la chiusura immediata\n\t\t\tthis.user_menu.classList.toggle('show');\n\t\t};\n\n\t\tconst logout_button = this.sroot.querySelector('.logout-button') as HTMLButtonElement;\n\t\tlogout_button.onclick = () => {\n\t\t\tthis.keycloak.logout();\n\t\t};\n\n\t\t// Listener globale per chiudere il menu se si clicca fuori\n\t\tdocument.addEventListener('click', (e) => {\n\t\t\tif (!this.sroot.contains(e.target as Node)) {\n\t\t\t\tthis.user_menu.classList.remove('show');\n\t\t\t}\n\t\t});\n\n\t\tthis.refreshLoginState();\n\t}\n\n\tasync refreshLoginState() {\n\t\tconst authenticated = await this.keycloak.init({\n\t\t\tredirectUri: 'http://localhost:8080'\n\t\t});\n\t\tif (authenticated) {\n\t\t\tconst token = this.keycloak.token!;\n\t\t\tconst decoded: any = jwtDecode(token);\n\t\t\tconst username = decoded.preferred_username || decoded.name || 'User';\n\n\t\t\tthis.user_button.textContent = `${username} `;\n\t\t\t\n\t\t\tthis.div_unauthenticated.classList.add('display-none');\n\t\t\tthis.div_authenticated.classList.remove('display-none');\n\t\t} else {\n\t\t\tthis.div_authenticated.classList.add('display-none');\n\t\t\tthis.div_unauthenticated.classList.remove('display-none');\n\t\t}\n\t}\n}\n\ncustomElements.define('cs-auth-component', AuthComponent);\n","/*\n * Copyright 2016 Red Hat, Inc. and/or its affiliates\n * and other contributors as indicated by the @author tags.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction Keycloak (config) {\n    if (!(this instanceof Keycloak)) {\n        throw new Error(\"The 'Keycloak' constructor must be invoked with 'new'.\")\n    }\n\n    if (typeof config !== 'string' && !isObject(config)) {\n        throw new Error(\"The 'Keycloak' constructor must be provided with a configuration object, or a URL to a JSON configuration file.\");\n    }\n\n    if (isObject(config)) {\n        const requiredProperties = 'oidcProvider' in config\n            ? ['clientId']\n            : ['url', 'realm', 'clientId'];\n\n        for (const property of requiredProperties) {\n            if (!config[property]) {\n                throw new Error(`The configuration object is missing the required '${property}' property.`);\n            }\n        }\n    }\n\n    var kc = this;\n    var adapter;\n    var refreshQueue = [];\n    var callbackStorage;\n\n    var loginIframe = {\n        enable: true,\n        callbackList: [],\n        interval: 5\n    };\n\n    kc.didInitialize = false;\n\n    var useNonce = true;\n    var logInfo = createLogger(console.info);\n    var logWarn = createLogger(console.warn);\n\n    if (!globalThis.isSecureContext) {\n        logWarn(\n            \"[KEYCLOAK] Keycloak JS must be used in a 'secure context' to function properly as it relies on browser APIs that are otherwise not available.\\n\" +\n            \"Continuing to run your application insecurely will lead to unexpected behavior and breakage.\\n\\n\" +\n            \"For more information see: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts\"\n        );\n    }\n\n    kc.init = function (initOptions = {}) {\n        if (kc.didInitialize) {\n            throw new Error(\"A 'Keycloak' instance can only be initialized once.\");\n        }\n\n        kc.didInitialize = true;\n\n        kc.authenticated = false;\n\n        callbackStorage = createCallbackStorage();\n        var adapters = ['default', 'cordova', 'cordova-native'];\n\n        if (adapters.indexOf(initOptions.adapter) > -1) {\n            adapter = loadAdapter(initOptions.adapter);\n        } else if (typeof initOptions.adapter === \"object\") {\n            adapter = initOptions.adapter;\n        } else {\n            if (window.Cordova || window.cordova) {\n                adapter = loadAdapter('cordova');\n            } else {\n                adapter = loadAdapter();\n            }\n        }\n\n        if (typeof initOptions.useNonce !== 'undefined') {\n            useNonce = initOptions.useNonce;\n        }\n\n        if (typeof initOptions.checkLoginIframe !== 'undefined') {\n            loginIframe.enable = initOptions.checkLoginIframe;\n        }\n\n        if (initOptions.checkLoginIframeInterval) {\n            loginIframe.interval = initOptions.checkLoginIframeInterval;\n        }\n\n        if (initOptions.onLoad === 'login-required') {\n            kc.loginRequired = true;\n        }\n\n        if (initOptions.responseMode) {\n            if (initOptions.responseMode === 'query' || initOptions.responseMode === 'fragment') {\n                kc.responseMode = initOptions.responseMode;\n            } else {\n                throw 'Invalid value for responseMode';\n            }\n        }\n\n        if (initOptions.flow) {\n            switch (initOptions.flow) {\n                case 'standard':\n                    kc.responseType = 'code';\n                    break;\n                case 'implicit':\n                    kc.responseType = 'id_token token';\n                    break;\n                case 'hybrid':\n                    kc.responseType = 'code id_token token';\n                    break;\n                default:\n                    throw 'Invalid value for flow';\n            }\n            kc.flow = initOptions.flow;\n        }\n\n        if (initOptions.timeSkew != null) {\n            kc.timeSkew = initOptions.timeSkew;\n        }\n\n        if(initOptions.redirectUri) {\n            kc.redirectUri = initOptions.redirectUri;\n        }\n\n        if (initOptions.silentCheckSsoRedirectUri) {\n            kc.silentCheckSsoRedirectUri = initOptions.silentCheckSsoRedirectUri;\n        }\n\n        if (typeof initOptions.silentCheckSsoFallback === 'boolean') {\n            kc.silentCheckSsoFallback = initOptions.silentCheckSsoFallback;\n        } else {\n            kc.silentCheckSsoFallback = true;\n        }\n\n        if (typeof initOptions.pkceMethod !== \"undefined\") {\n            if (initOptions.pkceMethod !== \"S256\" && initOptions.pkceMethod !== false) {\n                throw new TypeError(`Invalid value for pkceMethod', expected 'S256' or false but got ${initOptions.pkceMethod}.`);\n            }\n\n            kc.pkceMethod = initOptions.pkceMethod;\n        } else {\n            kc.pkceMethod = \"S256\";\n        }\n\n        if (typeof initOptions.enableLogging === 'boolean') {\n            kc.enableLogging = initOptions.enableLogging;\n        } else {\n            kc.enableLogging = false;\n        }\n\n        if (initOptions.logoutMethod === 'POST') {\n            kc.logoutMethod = 'POST';\n        } else {\n            kc.logoutMethod = 'GET';\n        }\n\n        if (typeof initOptions.scope === 'string') {\n            kc.scope = initOptions.scope;\n        }\n\n        if (typeof initOptions.acrValues === 'string') {\n            kc.acrValues = initOptions.acrValues;\n        }\n\n        if (typeof initOptions.messageReceiveTimeout === 'number' && initOptions.messageReceiveTimeout > 0) {\n            kc.messageReceiveTimeout = initOptions.messageReceiveTimeout;\n        } else {\n            kc.messageReceiveTimeout = 10000;\n        }\n\n        if (!kc.responseMode) {\n            kc.responseMode = 'fragment';\n        }\n        if (!kc.responseType) {\n            kc.responseType = 'code';\n            kc.flow = 'standard';\n        }\n\n        var promise = createPromise();\n\n        var initPromise = createPromise();\n        initPromise.promise.then(function() {\n            kc.onReady && kc.onReady(kc.authenticated);\n            promise.setSuccess(kc.authenticated);\n        }).catch(function(error) {\n            promise.setError(error);\n        });\n\n        var configPromise = loadConfig();\n\n        function onLoad() {\n            var doLogin = function(prompt) {\n                if (!prompt) {\n                    options.prompt = 'none';\n                }\n\n                if (initOptions.locale) {\n                    options.locale = initOptions.locale;\n                }\n                kc.login(options).then(function () {\n                    initPromise.setSuccess();\n                }).catch(function (error) {\n                    initPromise.setError(error);\n                });\n            }\n\n            var checkSsoSilently = async function() {\n                var ifrm = document.createElement(\"iframe\");\n                var src = await kc.createLoginUrl({prompt: 'none', redirectUri: kc.silentCheckSsoRedirectUri});\n                ifrm.setAttribute(\"src\", src);\n                ifrm.setAttribute(\"sandbox\", \"allow-storage-access-by-user-activation allow-scripts allow-same-origin\");\n                ifrm.setAttribute(\"title\", \"keycloak-silent-check-sso\");\n                ifrm.style.display = \"none\";\n                document.body.appendChild(ifrm);\n\n                var messageCallback = function(event) {\n                    if (event.origin !== window.location.origin || ifrm.contentWindow !== event.source) {\n                        return;\n                    }\n\n                    var oauth = parseCallback(event.data);\n                    processCallback(oauth, initPromise);\n\n                    document.body.removeChild(ifrm);\n                    window.removeEventListener(\"message\", messageCallback);\n                };\n\n                window.addEventListener(\"message\", messageCallback);\n            };\n\n            var options = {};\n            switch (initOptions.onLoad) {\n                case 'check-sso':\n                    if (loginIframe.enable) {\n                        setupCheckLoginIframe().then(function() {\n                            checkLoginIframe().then(function (unchanged) {\n                                if (!unchanged) {\n                                    kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                                } else {\n                                    initPromise.setSuccess();\n                                }\n                            }).catch(function (error) {\n                                initPromise.setError(error);\n                            });\n                        });\n                    } else {\n                        kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                    }\n                    break;\n                case 'login-required':\n                    doLogin(true);\n                    break;\n                default:\n                    throw 'Invalid value for onLoad';\n            }\n        }\n\n        function processInit() {\n            var callback = parseCallback(window.location.href);\n\n            if (callback) {\n                window.history.replaceState(window.history.state, null, callback.newUrl);\n            }\n\n            if (callback && callback.valid) {\n                return setupCheckLoginIframe().then(function() {\n                    processCallback(callback, initPromise);\n                }).catch(function (error) {\n                    initPromise.setError(error);\n                });\n            }\n\n            if (initOptions.token && initOptions.refreshToken) {\n                setToken(initOptions.token, initOptions.refreshToken, initOptions.idToken);\n\n                if (loginIframe.enable) {\n                    setupCheckLoginIframe().then(function() {\n                        checkLoginIframe().then(function (unchanged) {\n                            if (unchanged) {\n                                kc.onAuthSuccess && kc.onAuthSuccess();\n                                initPromise.setSuccess();\n                                scheduleCheckIframe();\n                            } else {\n                                initPromise.setSuccess();\n                            }\n                        }).catch(function (error) {\n                            initPromise.setError(error);\n                        });\n                    });\n                } else {\n                    kc.updateToken(-1).then(function() {\n                        kc.onAuthSuccess && kc.onAuthSuccess();\n                        initPromise.setSuccess();\n                    }).catch(function(error) {\n                        kc.onAuthError && kc.onAuthError();\n                        if (initOptions.onLoad) {\n                            onLoad();\n                        } else {\n                            initPromise.setError(error);\n                        }\n                    });\n                }\n            } else if (initOptions.onLoad) {\n                onLoad();\n            } else {\n                initPromise.setSuccess();\n            }\n        }\n\n        configPromise.then(function () {\n            check3pCookiesSupported()\n                .then(processInit)\n                .catch(function (error) {\n                    promise.setError(error);\n                });\n        });\n        configPromise.catch(function (error) {\n            promise.setError(error);\n        });\n\n        return promise.promise;\n    }\n\n    kc.login = function (options) {\n        return adapter.login(options);\n    }\n\n    function generateRandomData(len) {\n        if (typeof crypto === \"undefined\" || typeof crypto.getRandomValues === \"undefined\") {\n            throw new Error(\"Web Crypto API is not available.\");\n        }\n\n        return crypto.getRandomValues(new Uint8Array(len));\n    }\n\n    function generateCodeVerifier(len) {\n        return generateRandomString(len, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789');\n    }\n\n    function generateRandomString(len, alphabet){\n        var randomData = generateRandomData(len);\n        var chars = new Array(len);\n        for (var i = 0; i < len; i++) {\n            chars[i] = alphabet.charCodeAt(randomData[i] % alphabet.length);\n        }\n        return String.fromCharCode.apply(null, chars);\n    }\n\n    async function generatePkceChallenge(pkceMethod, codeVerifier) {\n        if (pkceMethod !== \"S256\") {\n            throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${pkceMethod}'.`);\n        }\n\n        // hash codeVerifier, then encode as url-safe base64 without padding\n        const hashBytes = new Uint8Array(await sha256Digest(codeVerifier));\n        const encodedHash = bytesToBase64(hashBytes)\n            .replace(/\\+/g, '-')\n            .replace(/\\//g, '_')\n            .replace(/\\=/g, '');\n\n        return encodedHash;\n    }\n\n    function buildClaimsParameter(requestedAcr){\n        var claims = {\n            id_token: {\n                acr: requestedAcr\n            }\n        }\n        return JSON.stringify(claims);\n    }\n\n    kc.createLoginUrl = async function(options) {\n        var state = createUUID();\n        var nonce = createUUID();\n\n        var redirectUri = adapter.redirectUri(options);\n\n        var callbackState = {\n            state: state,\n            nonce: nonce,\n            redirectUri: encodeURIComponent(redirectUri),\n            loginOptions: options\n        };\n\n        if (options && options.prompt) {\n            callbackState.prompt = options.prompt;\n        }\n\n        var baseUrl;\n        if (options && options.action == 'register') {\n            baseUrl = kc.endpoints.register();\n        } else {\n            baseUrl = kc.endpoints.authorize();\n        }\n\n        var scope = options && options.scope || kc.scope;\n        if (!scope) {\n            // if scope is not set, default to \"openid\"\n            scope = \"openid\";\n        } else if (scope.indexOf(\"openid\") === -1) {\n            // if openid scope is missing, prefix the given scopes with it\n            scope = \"openid \" + scope;\n        }\n\n        var url = baseUrl\n            + '?client_id=' + encodeURIComponent(kc.clientId)\n            + '&redirect_uri=' + encodeURIComponent(redirectUri)\n            + '&state=' + encodeURIComponent(state)\n            + '&response_mode=' + encodeURIComponent(kc.responseMode)\n            + '&response_type=' + encodeURIComponent(kc.responseType)\n            + '&scope=' + encodeURIComponent(scope);\n        if (useNonce) {\n            url = url + '&nonce=' + encodeURIComponent(nonce);\n        }\n\n        if (options && options.prompt) {\n            url += '&prompt=' + encodeURIComponent(options.prompt);\n        }\n\n        if (options && typeof options.maxAge === 'number') {\n            url += '&max_age=' + encodeURIComponent(options.maxAge);\n        }\n\n        if (options && options.loginHint) {\n            url += '&login_hint=' + encodeURIComponent(options.loginHint);\n        }\n\n        if (options && options.idpHint) {\n            url += '&kc_idp_hint=' + encodeURIComponent(options.idpHint);\n        }\n\n        if (options && options.action && options.action != 'register') {\n            url += '&kc_action=' + encodeURIComponent(options.action);\n        }\n\n        if (options && options.locale) {\n            url += '&ui_locales=' + encodeURIComponent(options.locale);\n        }\n\n        if (options && options.acr) {\n            var claimsParameter = buildClaimsParameter(options.acr);\n            url += '&claims=' + encodeURIComponent(claimsParameter);\n        }\n\n        if ((options && options.acrValues) || kc.acrValues) {\n            url += '&acr_values=' + encodeURIComponent(options.acrValues || kc.acrValues);\n        }\n\n        if (kc.pkceMethod) {\n            try {\n                const codeVerifier = generateCodeVerifier(96);\n                const pkceChallenge = await generatePkceChallenge(kc.pkceMethod, codeVerifier);\n\n                callbackState.pkceCodeVerifier = codeVerifier;\n\n                url += '&code_challenge=' + pkceChallenge;\n                url += '&code_challenge_method=' + kc.pkceMethod;\n            } catch (error) {\n                throw new Error(\"Failed to generate PKCE challenge.\", { cause: error });\n            }\n        }\n\n        callbackStorage.add(callbackState);\n\n        return url;\n    }\n\n    kc.logout = function(options) {\n        return adapter.logout(options);\n    }\n\n    kc.createLogoutUrl = function(options) {\n\n        const logoutMethod = options?.logoutMethod ?? kc.logoutMethod;\n        if (logoutMethod === 'POST') {\n            return kc.endpoints.logout();\n        }\n\n        var url = kc.endpoints.logout()\n            + '?client_id=' + encodeURIComponent(kc.clientId)\n            + '&post_logout_redirect_uri=' + encodeURIComponent(adapter.redirectUri(options, false));\n\n        if (kc.idToken) {\n            url += '&id_token_hint=' + encodeURIComponent(kc.idToken);\n        }\n\n        return url;\n    }\n\n    kc.register = function (options) {\n        return adapter.register(options);\n    }\n\n    kc.createRegisterUrl = async function(options) {\n        if (!options) {\n            options = {};\n        }\n        options.action = 'register';\n        return await kc.createLoginUrl(options);\n    }\n\n    kc.createAccountUrl = function(options) {\n        var realm = getRealmUrl();\n        var url = undefined;\n        if (typeof realm !== 'undefined') {\n            url = realm\n            + '/account'\n            + '?referrer=' + encodeURIComponent(kc.clientId)\n            + '&referrer_uri=' + encodeURIComponent(adapter.redirectUri(options));\n        }\n        return url;\n    }\n\n    kc.accountManagement = function() {\n        return adapter.accountManagement();\n    }\n\n    kc.hasRealmRole = function (role) {\n        var access = kc.realmAccess;\n        return !!access && access.roles.indexOf(role) >= 0;\n    }\n\n    kc.hasResourceRole = function(role, resource) {\n        if (!kc.resourceAccess) {\n            return false;\n        }\n\n        var access = kc.resourceAccess[resource || kc.clientId];\n        return !!access && access.roles.indexOf(role) >= 0;\n    }\n\n    kc.loadUserProfile = function() {\n        var url = getRealmUrl() + '/account';\n        var req = new XMLHttpRequest();\n        req.open('GET', url, true);\n        req.setRequestHeader('Accept', 'application/json');\n        req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n\n        var promise = createPromise();\n\n        req.onreadystatechange = function () {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    kc.profile = JSON.parse(req.responseText);\n                    promise.setSuccess(kc.profile);\n                } else {\n                    promise.setError();\n                }\n            }\n        }\n\n        req.send();\n\n        return promise.promise;\n    }\n\n    kc.loadUserInfo = function() {\n        var url = kc.endpoints.userinfo();\n        var req = new XMLHttpRequest();\n        req.open('GET', url, true);\n        req.setRequestHeader('Accept', 'application/json');\n        req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n\n        var promise = createPromise();\n\n        req.onreadystatechange = function () {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    kc.userInfo = JSON.parse(req.responseText);\n                    promise.setSuccess(kc.userInfo);\n                } else {\n                    promise.setError();\n                }\n            }\n        }\n\n        req.send();\n\n        return promise.promise;\n    }\n\n    kc.isTokenExpired = function(minValidity) {\n        if (!kc.tokenParsed || (!kc.refreshToken && kc.flow != 'implicit' )) {\n            throw 'Not authenticated';\n        }\n\n        if (kc.timeSkew == null) {\n            logInfo('[KEYCLOAK] Unable to determine if token is expired as timeskew is not set');\n            return true;\n        }\n\n        var expiresIn = kc.tokenParsed['exp'] - Math.ceil(new Date().getTime() / 1000) + kc.timeSkew;\n        if (minValidity) {\n            if (isNaN(minValidity)) {\n                throw 'Invalid minValidity';\n            }\n            expiresIn -= minValidity;\n        }\n        return expiresIn < 0;\n    }\n\n    kc.updateToken = function(minValidity) {\n        var promise = createPromise();\n\n        if (!kc.refreshToken) {\n            promise.setError();\n            return promise.promise;\n        }\n\n        minValidity = minValidity || 5;\n\n        var exec = function() {\n            var refreshToken = false;\n            if (minValidity == -1) {\n                refreshToken = true;\n                logInfo('[KEYCLOAK] Refreshing token: forced refresh');\n            } else if (!kc.tokenParsed || kc.isTokenExpired(minValidity)) {\n                refreshToken = true;\n                logInfo('[KEYCLOAK] Refreshing token: token expired');\n            }\n\n            if (!refreshToken) {\n                promise.setSuccess(false);\n            } else {\n                var params = 'grant_type=refresh_token&' + 'refresh_token=' + kc.refreshToken;\n                var url = kc.endpoints.token();\n\n                refreshQueue.push(promise);\n\n                if (refreshQueue.length == 1) {\n                    var req = new XMLHttpRequest();\n                    req.open('POST', url, true);\n                    req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n                    req.withCredentials = true;\n\n                    params += '&client_id=' + encodeURIComponent(kc.clientId);\n\n                    var timeLocal = new Date().getTime();\n\n                    req.onreadystatechange = function () {\n                        if (req.readyState == 4) {\n                            if (req.status == 200) {\n                                logInfo('[KEYCLOAK] Token refreshed');\n\n                                timeLocal = (timeLocal + new Date().getTime()) / 2;\n\n                                var tokenResponse = JSON.parse(req.responseText);\n\n                                setToken(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], timeLocal);\n\n                                kc.onAuthRefreshSuccess && kc.onAuthRefreshSuccess();\n                                for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                                    p.setSuccess(true);\n                                }\n                            } else {\n                                logWarn('[KEYCLOAK] Failed to refresh token');\n\n                                if (req.status == 400) {\n                                    kc.clearToken();\n                                }\n\n                                kc.onAuthRefreshError && kc.onAuthRefreshError();\n                                for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                                    p.setError(\"Failed to refresh token: An unexpected HTTP error occurred while attempting to refresh the token.\");\n                                }\n                            }\n                        }\n                    };\n\n                    req.send(params);\n                }\n            }\n        }\n\n        if (loginIframe.enable) {\n            var iframePromise = checkLoginIframe();\n            iframePromise.then(function() {\n                exec();\n            }).catch(function(error) {\n                promise.setError(error);\n            });\n        } else {\n            exec();\n        }\n\n        return promise.promise;\n    }\n\n    kc.clearToken = function() {\n        if (kc.token) {\n            setToken(null, null, null);\n            kc.onAuthLogout && kc.onAuthLogout();\n            if (kc.loginRequired) {\n                kc.login();\n            }\n        }\n    }\n\n    function getRealmUrl() {\n        if (typeof kc.authServerUrl !== 'undefined') {\n            if (kc.authServerUrl.charAt(kc.authServerUrl.length - 1) == '/') {\n                return kc.authServerUrl + 'realms/' + encodeURIComponent(kc.realm);\n            } else {\n                return kc.authServerUrl + '/realms/' + encodeURIComponent(kc.realm);\n            }\n        } else {\n            return undefined;\n        }\n    }\n\n    function getOrigin() {\n        if (!window.location.origin) {\n            return window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port: '');\n        } else {\n            return window.location.origin;\n        }\n    }\n\n    function processCallback(oauth, promise) {\n        var code = oauth.code;\n        var error = oauth.error;\n        var prompt = oauth.prompt;\n\n        var timeLocal = new Date().getTime();\n\n        if (oauth['kc_action_status']) {\n            kc.onActionUpdate && kc.onActionUpdate(oauth['kc_action_status'], oauth['kc_action']);\n        }\n\n        if (error) {\n            if (prompt != 'none') {\n                if (oauth.error_description && oauth.error_description === \"authentication_expired\") {\n                    kc.login(oauth.loginOptions);\n                } else {\n                    var errorData = { error: error, error_description: oauth.error_description };\n                    kc.onAuthError && kc.onAuthError(errorData);\n                    promise && promise.setError(errorData);\n                }\n            } else {\n                promise && promise.setSuccess();\n            }\n            return;\n        } else if ((kc.flow != 'standard') && (oauth.access_token || oauth.id_token)) {\n            authSuccess(oauth.access_token, null, oauth.id_token, true);\n        }\n\n        if ((kc.flow != 'implicit') && code) {\n            var params = 'code=' + code + '&grant_type=authorization_code';\n            var url = kc.endpoints.token();\n\n            var req = new XMLHttpRequest();\n            req.open('POST', url, true);\n            req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\n            params += '&client_id=' + encodeURIComponent(kc.clientId);\n            params += '&redirect_uri=' + oauth.redirectUri;\n\n            if (oauth.pkceCodeVerifier) {\n                params += '&code_verifier=' + oauth.pkceCodeVerifier;\n            }\n\n            req.withCredentials = true;\n\n            req.onreadystatechange = function() {\n                if (req.readyState == 4) {\n                    if (req.status == 200) {\n\n                        var tokenResponse = JSON.parse(req.responseText);\n                        authSuccess(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], kc.flow === 'standard');\n                        scheduleCheckIframe();\n                    } else {\n                        kc.onAuthError && kc.onAuthError();\n                        promise && promise.setError();\n                    }\n                }\n            };\n\n            req.send(params);\n        }\n\n        function authSuccess(accessToken, refreshToken, idToken, fulfillPromise) {\n            timeLocal = (timeLocal + new Date().getTime()) / 2;\n\n            setToken(accessToken, refreshToken, idToken, timeLocal);\n\n            if (useNonce && (kc.idTokenParsed && kc.idTokenParsed.nonce != oauth.storedNonce)) {\n                logInfo('[KEYCLOAK] Invalid nonce, clearing token');\n                kc.clearToken();\n                promise && promise.setError();\n            } else {\n                if (fulfillPromise) {\n                    kc.onAuthSuccess && kc.onAuthSuccess();\n                    promise && promise.setSuccess();\n                }\n            }\n        }\n\n    }\n\n    function loadConfig() {\n        var promise = createPromise();\n        var configUrl;\n\n        if (typeof config === 'string') {\n            configUrl = config;\n        }\n\n        function setupOidcEndoints(oidcConfiguration) {\n            if (! oidcConfiguration) {\n                kc.endpoints = {\n                    authorize: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/auth';\n                    },\n                    token: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/token';\n                    },\n                    logout: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/logout';\n                    },\n                    checkSessionIframe: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/login-status-iframe.html';\n                    },\n                    thirdPartyCookiesIframe: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/3p-cookies/step1.html';\n                    },\n                    register: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/registrations';\n                    },\n                    userinfo: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/userinfo';\n                    }\n                };\n            } else {\n                kc.endpoints = {\n                    authorize: function() {\n                        return oidcConfiguration.authorization_endpoint;\n                    },\n                    token: function() {\n                        return oidcConfiguration.token_endpoint;\n                    },\n                    logout: function() {\n                        if (!oidcConfiguration.end_session_endpoint) {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return oidcConfiguration.end_session_endpoint;\n                    },\n                    checkSessionIframe: function() {\n                        if (!oidcConfiguration.check_session_iframe) {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return oidcConfiguration.check_session_iframe;\n                    },\n                    register: function() {\n                        throw 'Redirection to \"Register user\" page not supported in standard OIDC mode';\n                    },\n                    userinfo: function() {\n                        if (!oidcConfiguration.userinfo_endpoint) {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return oidcConfiguration.userinfo_endpoint;\n                    }\n                }\n            }\n        }\n\n        if (configUrl) {\n            var req = new XMLHttpRequest();\n            req.open('GET', configUrl, true);\n            req.setRequestHeader('Accept', 'application/json');\n\n            req.onreadystatechange = function () {\n                if (req.readyState == 4) {\n                    if (req.status == 200 || fileLoaded(req)) {\n                        var config = JSON.parse(req.responseText);\n\n                        kc.authServerUrl = config['auth-server-url'];\n                        kc.realm = config['realm'];\n                        kc.clientId = config['resource'];\n                        setupOidcEndoints(null);\n                        promise.setSuccess();\n                    } else {\n                        promise.setError();\n                    }\n                }\n            };\n\n            req.send();\n        } else {\n            kc.clientId = config.clientId;\n\n            var oidcProvider = config['oidcProvider'];\n            if (!oidcProvider) {\n                kc.authServerUrl = config.url;\n                kc.realm = config.realm;\n                setupOidcEndoints(null);\n                promise.setSuccess();\n            } else {\n                if (typeof oidcProvider === 'string') {\n                    var oidcProviderConfigUrl;\n                    if (oidcProvider.charAt(oidcProvider.length - 1) == '/') {\n                        oidcProviderConfigUrl = oidcProvider + '.well-known/openid-configuration';\n                    } else {\n                        oidcProviderConfigUrl = oidcProvider + '/.well-known/openid-configuration';\n                    }\n                    var req = new XMLHttpRequest();\n                    req.open('GET', oidcProviderConfigUrl, true);\n                    req.setRequestHeader('Accept', 'application/json');\n\n                    req.onreadystatechange = function () {\n                        if (req.readyState == 4) {\n                            if (req.status == 200 || fileLoaded(req)) {\n                                var oidcProviderConfig = JSON.parse(req.responseText);\n                                setupOidcEndoints(oidcProviderConfig);\n                                promise.setSuccess();\n                            } else {\n                                promise.setError();\n                            }\n                        }\n                    };\n\n                    req.send();\n                } else {\n                    setupOidcEndoints(oidcProvider);\n                    promise.setSuccess();\n                }\n            }\n        }\n\n        return promise.promise;\n    }\n\n    function fileLoaded(xhr) {\n        return xhr.status == 0 && xhr.responseText && xhr.responseURL.startsWith('file:');\n    }\n\n    function setToken(token, refreshToken, idToken, timeLocal) {\n        if (kc.tokenTimeoutHandle) {\n            clearTimeout(kc.tokenTimeoutHandle);\n            kc.tokenTimeoutHandle = null;\n        }\n\n        if (refreshToken) {\n            kc.refreshToken = refreshToken;\n            kc.refreshTokenParsed = decodeToken(refreshToken);\n        } else {\n            delete kc.refreshToken;\n            delete kc.refreshTokenParsed;\n        }\n\n        if (idToken) {\n            kc.idToken = idToken;\n            kc.idTokenParsed = decodeToken(idToken);\n        } else {\n            delete kc.idToken;\n            delete kc.idTokenParsed;\n        }\n\n        if (token) {\n            kc.token = token;\n            kc.tokenParsed = decodeToken(token);\n            kc.sessionId = kc.tokenParsed.sid;\n            kc.authenticated = true;\n            kc.subject = kc.tokenParsed.sub;\n            kc.realmAccess = kc.tokenParsed.realm_access;\n            kc.resourceAccess = kc.tokenParsed.resource_access;\n\n            if (timeLocal) {\n                kc.timeSkew = Math.floor(timeLocal / 1000) - kc.tokenParsed.iat;\n            }\n\n            if (kc.timeSkew != null) {\n                logInfo('[KEYCLOAK] Estimated time difference between browser and server is ' + kc.timeSkew + ' seconds');\n\n                if (kc.onTokenExpired) {\n                    var expiresIn = (kc.tokenParsed['exp'] - (new Date().getTime() / 1000) + kc.timeSkew) * 1000;\n                    logInfo('[KEYCLOAK] Token expires in ' + Math.round(expiresIn / 1000) + ' s');\n                    if (expiresIn <= 0) {\n                        kc.onTokenExpired();\n                    } else {\n                        kc.tokenTimeoutHandle = setTimeout(kc.onTokenExpired, expiresIn);\n                    }\n                }\n            }\n        } else {\n            delete kc.token;\n            delete kc.tokenParsed;\n            delete kc.subject;\n            delete kc.realmAccess;\n            delete kc.resourceAccess;\n\n            kc.authenticated = false;\n        }\n    }\n\n    function createUUID() {\n        if (typeof crypto === \"undefined\" || typeof crypto.randomUUID === \"undefined\") {\n            throw new Error(\"Web Crypto API is not available.\");\n        }\n\n        return crypto.randomUUID();\n    }\n\n    function parseCallback(url) {\n        var oauth = parseCallbackUrl(url);\n        if (!oauth) {\n            return;\n        }\n\n        var oauthState = callbackStorage.get(oauth.state);\n\n        if (oauthState) {\n            oauth.valid = true;\n            oauth.redirectUri = oauthState.redirectUri;\n            oauth.storedNonce = oauthState.nonce;\n            oauth.prompt = oauthState.prompt;\n            oauth.pkceCodeVerifier = oauthState.pkceCodeVerifier;\n            oauth.loginOptions = oauthState.loginOptions;\n        }\n\n        return oauth;\n    }\n\n    function parseCallbackUrl(url) {\n        var supportedParams;\n        switch (kc.flow) {\n            case 'standard':\n                supportedParams = ['code', 'state', 'session_state', 'kc_action_status', 'kc_action', 'iss'];\n                break;\n            case 'implicit':\n                supportedParams = ['access_token', 'token_type', 'id_token', 'state', 'session_state', 'expires_in', 'kc_action_status', 'kc_action', 'iss'];\n                break;\n            case 'hybrid':\n                supportedParams = ['access_token', 'token_type', 'id_token', 'code', 'state', 'session_state', 'expires_in', 'kc_action_status', 'kc_action', 'iss'];\n                break;\n        }\n\n        supportedParams.push('error');\n        supportedParams.push('error_description');\n        supportedParams.push('error_uri');\n\n        var queryIndex = url.indexOf('?');\n        var fragmentIndex = url.indexOf('#');\n\n        var newUrl;\n        var parsed;\n\n        if (kc.responseMode === 'query' && queryIndex !== -1) {\n            newUrl = url.substring(0, queryIndex);\n            parsed = parseCallbackParams(url.substring(queryIndex + 1, fragmentIndex !== -1 ? fragmentIndex : url.length), supportedParams);\n            if (parsed.paramsString !== '') {\n                newUrl += '?' + parsed.paramsString;\n            }\n            if (fragmentIndex !== -1) {\n                newUrl += url.substring(fragmentIndex);\n            }\n        } else if (kc.responseMode === 'fragment' && fragmentIndex !== -1) {\n            newUrl = url.substring(0, fragmentIndex);\n            parsed = parseCallbackParams(url.substring(fragmentIndex + 1), supportedParams);\n            if (parsed.paramsString !== '') {\n                newUrl += '#' + parsed.paramsString;\n            }\n        }\n\n        if (parsed && parsed.oauthParams) {\n            if (kc.flow === 'standard' || kc.flow === 'hybrid') {\n                if ((parsed.oauthParams.code || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                    parsed.oauthParams.newUrl = newUrl;\n                    return parsed.oauthParams;\n                }\n            } else if (kc.flow === 'implicit') {\n                if ((parsed.oauthParams.access_token || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                    parsed.oauthParams.newUrl = newUrl;\n                    return parsed.oauthParams;\n                }\n            }\n        }\n    }\n\n    function parseCallbackParams(paramsString, supportedParams) {\n        var p = paramsString.split('&');\n        var result = {\n            paramsString: '',\n            oauthParams: {}\n        }\n        for (var i = 0; i < p.length; i++) {\n            var split = p[i].indexOf(\"=\");\n            var key = p[i].slice(0, split);\n            if (supportedParams.indexOf(key) !== -1) {\n                result.oauthParams[key] = p[i].slice(split + 1);\n            } else {\n                if (result.paramsString !== '') {\n                    result.paramsString += '&';\n                }\n                result.paramsString += p[i];\n            }\n        }\n        return result;\n    }\n\n    function createPromise() {\n        // Need to create a native Promise which also preserves the\n        // interface of the custom promise type previously used by the API\n        var p = {\n            setSuccess: function(result) {\n                p.resolve(result);\n            },\n\n            setError: function(result) {\n                p.reject(result);\n            }\n        };\n        p.promise = new Promise(function(resolve, reject) {\n            p.resolve = resolve;\n            p.reject = reject;\n        });\n\n        return p;\n    }\n\n    // Function to extend existing native Promise with timeout\n    function applyTimeoutToPromise(promise, timeout, errorMessage) {\n        var timeoutHandle = null;\n        var timeoutPromise = new Promise(function (resolve, reject) {\n            timeoutHandle = setTimeout(function () {\n                reject({ \"error\": errorMessage || \"Promise is not settled within timeout of \" + timeout + \"ms\" });\n            }, timeout);\n        });\n\n        return Promise.race([promise, timeoutPromise]).finally(function () {\n            clearTimeout(timeoutHandle);\n        });\n    }\n\n    function setupCheckLoginIframe() {\n        var promise = createPromise();\n\n        if (!loginIframe.enable) {\n            promise.setSuccess();\n            return promise.promise;\n        }\n\n        if (loginIframe.iframe) {\n            promise.setSuccess();\n            return promise.promise;\n        }\n\n        var iframe = document.createElement('iframe');\n        loginIframe.iframe = iframe;\n\n        iframe.onload = function() {\n            var authUrl = kc.endpoints.authorize();\n            if (authUrl.charAt(0) === '/') {\n                loginIframe.iframeOrigin = getOrigin();\n            } else {\n                loginIframe.iframeOrigin = authUrl.substring(0, authUrl.indexOf('/', 8));\n            }\n            promise.setSuccess();\n        }\n\n        var src = kc.endpoints.checkSessionIframe();\n        iframe.setAttribute('src', src );\n        iframe.setAttribute('sandbox', 'allow-storage-access-by-user-activation allow-scripts allow-same-origin');\n        iframe.setAttribute('title', 'keycloak-session-iframe' );\n        iframe.style.display = 'none';\n        document.body.appendChild(iframe);\n\n        var messageCallback = function(event) {\n            if ((event.origin !== loginIframe.iframeOrigin) || (loginIframe.iframe.contentWindow !== event.source)) {\n                return;\n            }\n\n            if (!(event.data == 'unchanged' || event.data == 'changed' || event.data == 'error')) {\n                return;\n            }\n\n\n            if (event.data != 'unchanged') {\n                kc.clearToken();\n            }\n\n            var callbacks = loginIframe.callbackList.splice(0, loginIframe.callbackList.length);\n\n            for (var i = callbacks.length - 1; i >= 0; --i) {\n                var promise = callbacks[i];\n                if (event.data == 'error') {\n                    promise.setError();\n                } else {\n                    promise.setSuccess(event.data == 'unchanged');\n                }\n            }\n        };\n\n        window.addEventListener('message', messageCallback, false);\n\n        return promise.promise;\n    }\n\n    function scheduleCheckIframe() {\n        if (loginIframe.enable) {\n            if (kc.token) {\n                setTimeout(function() {\n                    checkLoginIframe().then(function(unchanged) {\n                        if (unchanged) {\n                            scheduleCheckIframe();\n                        }\n                    });\n                }, loginIframe.interval * 1000);\n            }\n        }\n    }\n\n    function checkLoginIframe() {\n        var promise = createPromise();\n\n        if (loginIframe.iframe && loginIframe.iframeOrigin ) {\n            var msg = kc.clientId + ' ' + (kc.sessionId ? kc.sessionId : '');\n            loginIframe.callbackList.push(promise);\n            var origin = loginIframe.iframeOrigin;\n            if (loginIframe.callbackList.length == 1) {\n                loginIframe.iframe.contentWindow.postMessage(msg, origin);\n            }\n        } else {\n            promise.setSuccess();\n        }\n\n        return promise.promise;\n    }\n\n    function check3pCookiesSupported() {\n        var promise = createPromise();\n\n        if ((loginIframe.enable || kc.silentCheckSsoRedirectUri) && typeof kc.endpoints.thirdPartyCookiesIframe === 'function') {\n            var iframe = document.createElement('iframe');\n            iframe.setAttribute('src', kc.endpoints.thirdPartyCookiesIframe());\n            iframe.setAttribute('sandbox', 'allow-storage-access-by-user-activation allow-scripts allow-same-origin');\n            iframe.setAttribute('title', 'keycloak-3p-check-iframe' );\n            iframe.style.display = 'none';\n            document.body.appendChild(iframe);\n\n            var messageCallback = function(event) {\n                if (iframe.contentWindow !== event.source) {\n                    return;\n                }\n\n                if (event.data !== \"supported\" && event.data !== \"unsupported\") {\n                    return;\n                } else if (event.data === \"unsupported\") {\n                    logWarn(\n                        \"[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:\\n\\n\" +\n                        \" - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).\\n\" +\n                        \" - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).\\n\\n\" +\n                        \"For more information see: https://www.keycloak.org/securing-apps/javascript-adapter#_modern_browsers\"\n                    );\n\n                    loginIframe.enable = false;\n                    if (kc.silentCheckSsoFallback) {\n                        kc.silentCheckSsoRedirectUri = false;\n                    }\n                }\n\n                document.body.removeChild(iframe);\n                window.removeEventListener(\"message\", messageCallback);\n                promise.setSuccess();\n            };\n\n            window.addEventListener('message', messageCallback, false);\n        } else {\n            promise.setSuccess();\n        }\n\n        return applyTimeoutToPromise(promise.promise, kc.messageReceiveTimeout, \"Timeout when waiting for 3rd party check iframe message.\");\n    }\n\n    function loadAdapter(type) {\n        if (!type || type == 'default') {\n            return {\n                login: async function(options) {\n                    window.location.assign(await kc.createLoginUrl(options));\n                    return createPromise().promise;\n                },\n\n                logout: async function(options) {\n\n                    const logoutMethod = options?.logoutMethod ?? kc.logoutMethod;\n                    if (logoutMethod === \"GET\") {\n                        window.location.replace(kc.createLogoutUrl(options));\n                        return;\n                    }\n\n                    // Create form to send POST request.\n                    const form = document.createElement(\"form\");\n\n                    form.setAttribute(\"method\", \"POST\");\n                    form.setAttribute(\"action\", kc.createLogoutUrl(options));\n                    form.style.display = \"none\";\n\n                    // Add data to form as hidden input fields.\n                    const data = {\n                        id_token_hint: kc.idToken,\n                        client_id: kc.clientId,\n                        post_logout_redirect_uri: adapter.redirectUri(options, false)\n                    };\n\n                    for (const [name, value] of Object.entries(data)) {\n                        const input = document.createElement(\"input\");\n\n                        input.setAttribute(\"type\", \"hidden\");\n                        input.setAttribute(\"name\", name);\n                        input.setAttribute(\"value\", value);\n\n                        form.appendChild(input);\n                    }\n\n                    // Append form to page and submit it to perform logout and redirect.\n                    document.body.appendChild(form);\n                    form.submit();\n                },\n\n                register: async function(options) {\n                    window.location.assign(await kc.createRegisterUrl(options));\n                    return createPromise().promise;\n                },\n\n                accountManagement : function() {\n                    var accountUrl = kc.createAccountUrl();\n                    if (typeof accountUrl !== 'undefined') {\n                        window.location.href = accountUrl;\n                    } else {\n                        throw \"Not supported by the OIDC server\";\n                    }\n                    return createPromise().promise;\n                },\n\n                redirectUri: function(options, encodeHash) {\n                    if (arguments.length == 1) {\n                        encodeHash = true;\n                    }\n\n                    if (options && options.redirectUri) {\n                        return options.redirectUri;\n                    } else if (kc.redirectUri) {\n                        return kc.redirectUri;\n                    } else {\n                        return location.href;\n                    }\n                }\n            };\n        }\n\n        if (type == 'cordova') {\n            loginIframe.enable = false;\n            var cordovaOpenWindowWrapper = function(loginUrl, target, options) {\n                if (window.cordova && window.cordova.InAppBrowser) {\n                    // Use inappbrowser for IOS and Android if available\n                    return window.cordova.InAppBrowser.open(loginUrl, target, options);\n                } else {\n                    return window.open(loginUrl, target, options);\n                }\n            };\n\n            var shallowCloneCordovaOptions = function (userOptions) {\n                if (userOptions && userOptions.cordovaOptions) {\n                    return Object.keys(userOptions.cordovaOptions).reduce(function (options, optionName) {\n                        options[optionName] = userOptions.cordovaOptions[optionName];\n                        return options;\n                    }, {});\n                } else {\n                    return {};\n                }\n            };\n\n            var formatCordovaOptions = function (cordovaOptions) {\n                return Object.keys(cordovaOptions).reduce(function (options, optionName) {\n                    options.push(optionName+\"=\"+cordovaOptions[optionName]);\n                    return options;\n                }, []).join(\",\");\n            };\n\n            var createCordovaOptions = function (userOptions) {\n                var cordovaOptions = shallowCloneCordovaOptions(userOptions);\n                cordovaOptions.location = 'no';\n                if (userOptions && userOptions.prompt == 'none') {\n                    cordovaOptions.hidden = 'yes';\n                }\n                return formatCordovaOptions(cordovaOptions);\n            };\n\n            var getCordovaRedirectUri = function() {\n                return kc.redirectUri || 'http://localhost';\n            }\n\n            return {\n                login: async function(options) {\n                    var promise = createPromise();\n\n                    var cordovaOptions = createCordovaOptions(options);\n                    var loginUrl = await kc.createLoginUrl(options);\n                    var ref = cordovaOpenWindowWrapper(loginUrl, '_blank', cordovaOptions);\n                    var completed = false;\n\n                    var closed = false;\n                    var closeBrowser = function() {\n                        closed = true;\n                        ref.close();\n                    };\n\n                    ref.addEventListener('loadstart', function(event) {\n                        if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                            var callback = parseCallback(event.url);\n                            processCallback(callback, promise);\n                            closeBrowser();\n                            completed = true;\n                        }\n                    });\n\n                    ref.addEventListener('loaderror', function(event) {\n                        if (!completed) {\n                            if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                                var callback = parseCallback(event.url);\n                                processCallback(callback, promise);\n                                closeBrowser();\n                                completed = true;\n                            } else {\n                                promise.setError();\n                                closeBrowser();\n                            }\n                        }\n                    });\n\n                    ref.addEventListener('exit', function(event) {\n                        if (!closed) {\n                            promise.setError({\n                                reason: \"closed_by_user\"\n                            });\n                        }\n                    });\n\n                    return promise.promise;\n                },\n\n                logout: function(options) {\n                    var promise = createPromise();\n\n                    var logoutUrl = kc.createLogoutUrl(options);\n                    var ref = cordovaOpenWindowWrapper(logoutUrl, '_blank', 'location=no,hidden=yes,clearcache=yes');\n\n                    var error;\n\n                    ref.addEventListener('loadstart', function(event) {\n                        if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                            ref.close();\n                        }\n                    });\n\n                    ref.addEventListener('loaderror', function(event) {\n                        if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                            ref.close();\n                        } else {\n                            error = true;\n                            ref.close();\n                        }\n                    });\n\n                    ref.addEventListener('exit', function(event) {\n                        if (error) {\n                            promise.setError();\n                        } else {\n                            kc.clearToken();\n                            promise.setSuccess();\n                        }\n                    });\n\n                    return promise.promise;\n                },\n\n                register : async function(options) {\n                    var promise = createPromise();\n                    var registerUrl = await kc.createRegisterUrl();\n                    var cordovaOptions = createCordovaOptions(options);\n                    var ref = cordovaOpenWindowWrapper(registerUrl, '_blank', cordovaOptions);\n                    ref.addEventListener('loadstart', function(event) {\n                        if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                            ref.close();\n                            var oauth = parseCallback(event.url);\n                            processCallback(oauth, promise);\n                        }\n                    });\n                    return promise.promise;\n                },\n\n                accountManagement : function() {\n                    var accountUrl = kc.createAccountUrl();\n                    if (typeof accountUrl !== 'undefined') {\n                        var ref = cordovaOpenWindowWrapper(accountUrl, '_blank', 'location=no');\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                                ref.close();\n                            }\n                        });\n                    } else {\n                        throw \"Not supported by the OIDC server\";\n                    }\n                },\n\n                redirectUri: function(options) {\n                    return getCordovaRedirectUri();\n                }\n            }\n        }\n\n        if (type == 'cordova-native') {\n            loginIframe.enable = false;\n\n            return {\n                login: async function(options) {\n                    var promise = createPromise();\n                    var loginUrl = await kc.createLoginUrl(options);\n\n                    universalLinks.subscribe('keycloak', function(event) {\n                        universalLinks.unsubscribe('keycloak');\n                        window.cordova.plugins.browsertab.close();\n                        var oauth = parseCallback(event.url);\n                        processCallback(oauth, promise);\n                    });\n\n                    window.cordova.plugins.browsertab.openUrl(loginUrl);\n                    return promise.promise;\n                },\n\n                logout: function(options) {\n                    var promise = createPromise();\n                    var logoutUrl = kc.createLogoutUrl(options);\n\n                    universalLinks.subscribe('keycloak', function(event) {\n                        universalLinks.unsubscribe('keycloak');\n                        window.cordova.plugins.browsertab.close();\n                        kc.clearToken();\n                        promise.setSuccess();\n                    });\n\n                    window.cordova.plugins.browsertab.openUrl(logoutUrl);\n                    return promise.promise;\n                },\n\n                register : async function(options) {\n                    var promise = createPromise();\n                    var registerUrl = await kc.createRegisterUrl(options);\n                    universalLinks.subscribe('keycloak' , function(event) {\n                        universalLinks.unsubscribe('keycloak');\n                        window.cordova.plugins.browsertab.close();\n                        var oauth = parseCallback(event.url);\n                        processCallback(oauth, promise);\n                    });\n                    window.cordova.plugins.browsertab.openUrl(registerUrl);\n                    return promise.promise;\n\n                },\n\n                accountManagement : function() {\n                    var accountUrl = kc.createAccountUrl();\n                    if (typeof accountUrl !== 'undefined') {\n                        window.cordova.plugins.browsertab.openUrl(accountUrl);\n                    } else {\n                        throw \"Not supported by the OIDC server\";\n                    }\n                },\n\n                redirectUri: function(options) {\n                    if (options && options.redirectUri) {\n                        return options.redirectUri;\n                    } else if (kc.redirectUri) {\n                        return kc.redirectUri;\n                    } else {\n                        return \"http://localhost\";\n                    }\n                }\n            }\n        }\n\n        throw 'invalid adapter type: ' + type;\n    }\n\n    const STORAGE_KEY_PREFIX = 'kc-callback-';\n\n    var LocalStorage = function() {\n        if (!(this instanceof LocalStorage)) {\n            return new LocalStorage();\n        }\n\n        localStorage.setItem('kc-test', 'test');\n        localStorage.removeItem('kc-test');\n\n        var cs = this;\n\n        /**\n         * Clears all values from local storage that are no longer valid.\n         */\n        function clearInvalidValues() {\n            const currentTime = Date.now();\n\n            for (const [key, value] of getStoredEntries()) {\n                // Attempt to parse the expiry time from the value.\n                const expiry = parseExpiry(value);\n\n                // Discard the value if it is malformed or expired.\n                if (expiry === null || expiry < currentTime) {\n                    localStorage.removeItem(key);\n                }\n            }\n        }\n\n        /**\n         * Clears all known values from local storage.\n         */\n        function clearAllValues() {\n            for (const [key] of getStoredEntries()) {\n                localStorage.removeItem(key);\n            }\n        }\n\n        /**\n         * Gets all entries stored in local storage that are known to be managed by this class.\n         * @returns {Array<[string, unknown]>} An array of key-value pairs.\n         */\n        function getStoredEntries() {\n            return Object.entries(localStorage).filter(([key]) => key.startsWith(STORAGE_KEY_PREFIX));\n        }\n\n        /**\n         * Parses the expiry time from a value stored in local storage.\n         * @param {unknown} value\n         * @returns {number | null} The expiry time in milliseconds, or `null` if the value is malformed.\n         */\n        function parseExpiry(value) {\n            let parsedValue;\n\n            // Attempt to parse the value as JSON.\n            try {\n                parsedValue = JSON.parse(value);\n            } catch (error) {\n                return null;\n            }\n\n            // Attempt to extract the 'expires' property.\n            if (isObject(parsedValue) && 'expires' in parsedValue && typeof parsedValue.expires === 'number') {\n                return parsedValue.expires;\n            }\n\n            return null;\n        }\n\n        cs.get = function(state) {\n            if (!state) {\n                return;\n            }\n\n            var key = STORAGE_KEY_PREFIX + state;\n            var value = localStorage.getItem(key);\n            if (value) {\n                localStorage.removeItem(key);\n                value = JSON.parse(value);\n            }\n\n            clearInvalidValues();\n            return value;\n        };\n\n        cs.add = function(state) {\n            clearInvalidValues();\n\n            const key = STORAGE_KEY_PREFIX + state.state;\n            const value = JSON.stringify({\n                ...state,\n                // Set the expiry time to 1 hour from now.\n                expires: Date.now() + (60 * 60 * 1000)\n            });\n\n            try {\n                localStorage.setItem(key, value);\n            } catch (error) {\n                // If the storage is full, clear all known values and try again.\n                clearAllValues();\n                localStorage.setItem(key, value);\n            }\n        };\n    };\n\n    var CookieStorage = function() {\n        if (!(this instanceof CookieStorage)) {\n            return new CookieStorage();\n        }\n\n        var cs = this;\n\n        cs.get = function(state) {\n            if (!state) {\n                return;\n            }\n\n            var value = getCookie(STORAGE_KEY_PREFIX + state);\n            setCookie(STORAGE_KEY_PREFIX + state, '', cookieExpiration(-100));\n            if (value) {\n                return JSON.parse(value);\n            }\n        };\n\n        cs.add = function(state) {\n            setCookie(STORAGE_KEY_PREFIX + state.state, JSON.stringify(state), cookieExpiration(60));\n        };\n\n        cs.removeItem = function(key) {\n            setCookie(key, '', cookieExpiration(-100));\n        };\n\n        var cookieExpiration = function (minutes) {\n            var exp = new Date();\n            exp.setTime(exp.getTime() + (minutes*60*1000));\n            return exp;\n        };\n\n        var getCookie = function (key) {\n            var name = key + '=';\n            var ca = document.cookie.split(';');\n            for (var i = 0; i < ca.length; i++) {\n                var c = ca[i];\n                while (c.charAt(0) == ' ') {\n                    c = c.substring(1);\n                }\n                if (c.indexOf(name) == 0) {\n                    return c.substring(name.length, c.length);\n                }\n            }\n            return '';\n        };\n\n        var setCookie = function (key, value, expirationDate) {\n            var cookie = key + '=' + value + '; '\n                + 'expires=' + expirationDate.toUTCString() + '; ';\n            document.cookie = cookie;\n        }\n    };\n\n    function createCallbackStorage() {\n        try {\n            return new LocalStorage();\n        } catch (err) {\n        }\n\n        return new CookieStorage();\n    }\n\n    function createLogger(fn) {\n        return function() {\n            if (kc.enableLogging) {\n                fn.apply(console, Array.prototype.slice.call(arguments));\n            }\n        };\n    }\n}\n\nexport default Keycloak;\n\n/**\n * @param {ArrayBuffer} bytes\n * @see https://developer.mozilla.org/en-US/docs/Glossary/Base64#the_unicode_problem\n */\nfunction bytesToBase64(bytes) {\n    const binString = String.fromCodePoint(...bytes);\n    return btoa(binString);\n}\n\n/**\n * @param {string} message\n * @see https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest#basic_example\n */\nasync function sha256Digest(message) {\n    const encoder = new TextEncoder();\n    const data = encoder.encode(message);\n\n    if (typeof crypto === \"undefined\" || typeof crypto.subtle === \"undefined\") {\n        throw new Error(\"Web Crypto API is not available.\");\n    }\n\n    return await crypto.subtle.digest(\"SHA-256\", data);\n}\n\n/**\n * @param {string} token\n */\nfunction decodeToken(token) {\n    const [header, payload] = token.split(\".\");\n\n    if (typeof payload !== \"string\") {\n        throw new Error(\"Unable to decode token, payload not found.\");\n    }\n\n    let decoded;\n\n    try {\n        decoded = base64UrlDecode(payload);\n    } catch (error) {\n        throw new Error(\"Unable to decode token, payload is not a valid Base64URL value.\", { cause: error });\n    }\n\n    try {\n        return JSON.parse(decoded);\n    } catch (error) {\n        throw new Error(\"Unable to decode token, payload is not a valid JSON value.\", { cause: error });\n    }\n}\n\n/**\n * @param {string} input\n */\nfunction base64UrlDecode(input) {\n    let output = input\n        .replaceAll(\"-\", \"+\")\n        .replaceAll(\"_\", \"/\");\n\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"Input is not of the correct length.\");\n    }\n\n    try {\n        return b64DecodeUnicode(output);\n    } catch (error) {\n        return atob(output);\n    }\n}\n\n/**\n * @param {string} input\n */\nfunction b64DecodeUnicode(input) {\n    return decodeURIComponent(atob(input).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n\n        return \"%\" + code;\n    }));\n}\n\n/**\n * Check if the input is an object that can be operated on.\n * @param {unknown} input\n */\nfunction isObject(input) {\n    return typeof input === 'object' && input !== null;\n}\n","export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n"],"names":[],"version":3,"file":"main.js.map"}